<nta><declaration>const int nil = 0;
const int nilAnything = -1;
const int no = 1;
const int superstate = 2;
const int aiOn = 3;
const int droneFlight = 4;
const int acknowledgedCommands = 5;
const int startNewTimer = 6;
const int addressedProblem = 7;
const int operator = 8;
const int setAIOn = 9;
const int Processing = 10;
const int C2 = 11;
const int timer = 12;
const int initialize_drone = 13;
const int sentCommand = 14;
const int wait_flag = 15;
const int commands = 16;
const int queryPop = 17;
const int maxTimers = 18;
const int output_link = 19;
const int io = 20;
const int yes = 21;
const int populated = 22;
const int currentTimers = 23;
const int takeOver = 24;
const int input_link = 25;
const int reverse = 26;
const int done = 27;
const int currentTime = 28;
const int flightdata = 29;
const int name = 30;
const int willBeInPopulatedArea = 31;
const int targetTime = 32;
const int state_timer_1 = 33;
const int state_operator_1 = 34;
const int state_operator_2 = 35;
const int finalOp = 36;
const int _state = -1;
const int state_num_attributes = 10;
const int state_timer_1_num_attributes = 1;
const int state_operator_1_num_attributes = 1;
const int state_operator_2_num_attributes = 1;
broadcast chan Run_Rule;
broadcast chan Halt;
broadcast chan Reset_Apply;
chan Continue_Run;
chan Require_Test;
bool halt = false;
bool isRetracting;
bool addOperator;
bool removeOperator;
bool productionFired;
const int numTemplates = 11;
int stackCondition[numTemplates];
int stackAction[numTemplates];
int stackRetract[numTemplates];
int stackConditionIndex = -1;
int stackActionIndex = -1;
int stackRetractIndex = -1;
int selectedFinalOperatorIndex;
const int EMPTY = -2;
const int remove = -3;
const int addFunction = -4;
const int subtractFunction = -5;
const int multiplyFunction = -6;
const int divideFunction = -7;
const int extraRestriction = -8;
const int isNotEqualTo = -9;
const int isGreaterThan = -10;
const int isLessThan = -11;
const int isGreaterThanOrEqualTo = -12;
const int numAVs = 8;
int numAVCounter = 0;
int lookAheadArray[9];
int lookAheadIndex;
int lookAheadDefault[9];
int globalIndex = 0;
int valueFunction;
int attributeFunction;
int globalIdentifier;
int globalAttribute;
int globalValue;
int globalDoesContain;
int currentNumAttributes;
const int TOTAL_NUM_ATTRIBUTES = 13;
int nestedCheckArray[TOTAL_NUM_ATTRIBUTES];
int nestedCheckIndex = 0;

int id = 1;
const int N = 2;

typedef struct {
	bool isRequired;
	bool isAcceptable;
	bool isBest;
	bool isWorst;
	bool isProhibited;
	bool isRejected;
	bool isUnaryIndifferent;
	bool hasNumericIndifferent;
	int numericIndifferent;
	int id;
} BaseOperator;
typedef struct {
	BaseOperator operator;
	int[0, N] betterIndex;
	int better[N];
	int[0, N] binaryIndifferentIndex;
	int binaryIndifferent[N];
} Operator;

int retractOperators[N];
int retractOperatorsIndex = 0;
Operator operators[N];
int required[N];
int acceptable[N];
int best[N];
BaseOperator defaultOperator = {false, false, false, false, false, false, false, false, 0, 0};
int defaultOperatorArray[N];
int numLeft = 0;

int getNumLeft(int &amp;ref[N]) {
	int i = 0;
	int count = 0;
	while (i &lt; N &amp;&amp; ref[i] != 0) {
			count++;
			i++;
	}
	return count;
}

void initialize(Operator &amp;op[N]) {
	int i = 0;
	for (i = 0; i &lt; N; i++) {
		defaultOperatorArray[i] = 0;
	}
	for (i = 0; i &lt; N; i++) {
		BaseOperator def = {false, false, false, false, false, false, false, false, 0, id};
		op[i].operator = def;
		op[i].better = defaultOperatorArray;
		op[i].binaryIndifferent = defaultOperatorArray;
		id++;
		stackCondition[i] = 0;
		stackAction[i] = 0;
		stackRetract[i] = 0;
		retractOperators[i] = 0;
	}
	for (i = 0; i &lt; 9; i++) {
		lookAheadDefault[i] = 0;
	}
}

void addToStackCondition(int flag) {
	stackConditionIndex++;
	stackCondition[stackConditionIndex] = flag;
}

void addToStackAction(int flag) {
	stackActionIndex++;
	stackAction[stackActionIndex] = flag;
}

void addToStackRetract(int flag) {
	stackRetractIndex++;
	stackRetract[stackRetractIndex] = flag;
}

int removeStackCondition() {
	int temp = stackCondition[stackConditionIndex];
	stackCondition[stackConditionIndex] = 0;
	stackConditionIndex--;
	return temp;
}

int removeStackAction() {
	int temp = stackAction[stackActionIndex];
	stackAction[stackActionIndex] = 0;
	stackActionIndex--;
	return temp;
}

int removeStackRetract() {
	int temp = stackRetract[stackRetractIndex];
	stackRetract[stackRetractIndex] = 0;
	stackRetractIndex--;
	return temp;
}

void clearStacks() {
	stackConditionIndex = -1;
	stackActionIndex = -1;
	stackRetractIndex = -1;
}

void clearFill(int &amp;ref[N]) {
	int i = 0;
	while(i &lt; N &amp;&amp; ref[i] != 0) {
		ref[i] = 0;
	}
}

bool retractOperatorsContains(int checkValue) {
	bool contains = false;
	int i;
	for(i = 0; i &lt; retractOperatorsIndex; i++) {
		if (retractOperators[i] == checkValue) {
			contains = true;
			i = retractOperatorsIndex;
		}
	}
	return contains;
}

void clearOperator(int operatorIndex) {
	BaseOperator def = defaultOperator;
	def.id = operators[operatorIndex].operator.id;
	operators[operatorIndex].operator = def;
	while (operators[operatorIndex].betterIndex &gt; 0) {
		operators[operatorIndex].betterIndex--;
		operators[operatorIndex].better[operators[operatorIndex].betterIndex] = 0;
	}
	while (operators[operatorIndex].binaryIndifferentIndex &gt; 0) {
		operators[operatorIndex].binaryIndifferentIndex--;
		operators[operatorIndex].binaryIndifferent[operators[operatorIndex].binaryIndifferentIndex] = 0;
	}
}

void fillOthers() {
	int i = 0;
	int requiredIndex = 0;
	int acceptableIndex = 0;
	int bestIndex = 0;
	for (i = 0; i &lt; N; i++) {
		if (operators[i].operator.isRequired) {
			required[requiredIndex] = operators[i].operator.id;
			requiredIndex++;
		}
		if (operators[i].operator.isAcceptable) {
			acceptable[acceptableIndex] = operators[i].operator.id;
			acceptableIndex++;
		} 
		if (operators[i].operator.isBest) {
			best[bestIndex] = operators[i].operator.id;
			bestIndex++;
		}
	}
}
void addBetterTo(int index1, int index2) {
	int nextIndex = operators[index1].betterIndex;
	operators[index1].betterIndex++;
	operators[index1].better[nextIndex] = index2;
}

void addBinaryIndifferentTo(int index1, int index2) {
	int nextIndex = operators[index1].binaryIndifferentIndex;
	operators[index1].binaryIndifferentIndex++;
	operators[index1].binaryIndifferent[nextIndex] = index2;
}

void addToNestedCheckArray(int value) {
	nestedCheckArray[nestedCheckIndex] = value;
	nestedCheckIndex++;
}

void removeNestedCheckArray() {
	nestedCheckArray[globalIndex] = 0;
}

int getNumAttributes(int variable) {
	if (variable == finalOp){
		return 1;
	} else if (variable == state_timer_1) {
		return state_timer_1_num_attributes;
	} else if (variable == state_operator_1) {
		return state_operator_1_num_attributes;
	} else if (variable == state_operator_2) {
		return state_operator_2_num_attributes;
	} else {
		return -1;
	}
}

int getOperatorFromID(int id) {
	if (id == 0) {
		return state_operator_1;
	} else if (id == 1) {
		return state_operator_2;
	} else {
		return -1;
	}
}

int getIDFromOperator(int operator) {
	if (operator == state_operator_1) {
		return 0;
	} else if (operator == state_operator_2) {
		return 1;
	} else {
		return -1;
	}
}

</declaration><template><name>drone_propose_initialize</name><declaration>const int NUMBER_OF_PRODUCTIONS = 1;

int productionIndex = 0;
int productionIndexTemp;
void fillNextProduction() {
	productionIndex++;
}


void checkAndClearFinalOperator() {
	 if(selectedFinalOperatorIndex == 2) {
		addToNestedCheckArray(finalOp);
	}
	retractOperators[retractOperatorsIndex++] = 2;
	clearOperator(1);
}
</declaration><location id="id0" x="-152" y="0"><name x="-200" y="-32">Start</name><committed/></location><location id="id1" x="-522" y="0"><name x="-702" y="-49">Retract_Conditions</name><committed/></location><location id="id2" x="-892" y="0"><committed/></location><location id="id3" x="-1262" y="0"><name x="-1452" y="-49">Retract_Assignments</name><committed/></location><location id="id4" x="-892" y="319"><committed/></location><location id="id5" x="-1632" y="0"><committed/></location><location id="id6" x="-1632" y="319"><committed/></location><location id="id7" x="-1632" y="519"><committed/></location><location id="id8" x="218" y="0"><name x="128" y="-32">Run_Guard</name><committed/></location><location id="id9" x="588" y="0"><committed/></location><location id="id10" x="588" y="200"><committed/></location><location id="id11" x="958" y="0"><name x="818" y="-32">Run_Assignment</name><committed/></location><location id="id12" x="1328" y="0"><committed/></location><location id="id13" x="1328" y="200"><committed/></location><init ref="id0"/><transition><source ref="id0"/><target ref="id1"/><label kind="guard" x="-502" y="-17">isRetracting</label><label kind="synchronisation" x="-502" y="-34">Run_Rule?</label><label kind="assignment" x="-502" y="8">addToStackRetract(1),
productionIndexTemp = 0</label></transition><transition><source ref="id1"/><target ref="id0"/><label kind="guard" x="-714" y="-178">stackRetract[stackRetractIndex] == 1 &amp;&amp;
productionIndexTemp == productionIndex</label><label kind="assignment" x="-714" y="-144">productionIndexTemp = 0,
removeStackRetract()</label><nail x="-717" y="0"/><nail x="-717" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id1"/><target ref="id2"/><label kind="guard" x="-872" y="-34">productionIndexTemp != productionIndex &amp;&amp;
stackRetract[stackRetractIndex] == 1</label><label kind="assignment" x="-872" y="8">valueFunction = 0,
globalValue = nil,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = superstate,
globalDoesContain = 0</label></transition><transition><source ref="id2"/><target ref="id3"/><label kind="guard" x="-1084" y="-17">globalDoesContain == -1</label></transition><transition><source ref="id2"/><target ref="id4"/><label kind="guard" x="-867" y="136">globalDoesContain == 1</label><label kind="assignment" x="-867" y="153">valueFunction = 0,
globalValue = EMPTY,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = name,
globalDoesContain = 0</label></transition><transition><source ref="id4"/><target ref="id3"/><label kind="guard" x="-1084" y="302">globalDoesContain == -1</label><nail x="-1262" y="319"/></transition><transition><source ref="id4"/><target ref="id1"/><label kind="guard" x="-1234" y="175">globalDoesContain == 1</label><label kind="assignment" x="-1234" y="192">productionIndexTemp++</label><nail x="-1237" y="319"/><nail x="-1237" y="-110"/><nail x="-522" y="-110"/></transition><transition><source ref="id3"/><target ref="id5"/><label kind="guard" x="-1612" y="-34">productionIndexTemp != productionIndex &amp;&amp;
stackRetract[stackRetractIndex] == 1</label><label kind="assignment" x="-1612" y="8">valueFunction = remove,
globalValue = state_operator_2,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = operator,
addOperator = true</label></transition><transition><source ref="id5"/><target ref="id6"/><label kind="guard" x="-1607" y="136">!addOperator</label><label kind="assignment" x="-1607" y="153">valueFunction = remove,
globalValue = initialize_drone,
attributeFunction = 0,
globalIdentifier = state_operator_2,
globalAttribute = name,
addOperator = true,
checkAndClearFinalOperator()</label></transition><transition><source ref="id6"/><target ref="id7"/><label kind="guard" x="-1607" y="336">!addOperator</label><label kind="assignment" x="-1607" y="353">removeOperator = true,
globalIndex = 0,
currentNumAttributes =
getNumAttributes(nestedCheckArray[0])</label></transition><transition><source ref="id7"/><target ref="id1"/><label kind="guard" x="-1824" y="358">!removeOperator &amp;&amp;
currentNumAttributes == 0</label><label kind="assignment" x="-1824" y="392">productionIndex--</label><nail x="-1827" y="519"/><nail x="-1827" y="-110"/><nail x="-522" y="-110"/></transition><transition><source ref="id0"/><target ref="id8"/><label kind="guard" x="-132" y="-34">!isRetracting &amp;&amp;
productionIndex != NUMBER_OF_PRODUCTIONS</label><label kind="synchronisation" x="-132" y="-51">Run_Rule?</label><label kind="assignment" x="-132" y="8">addToStackCondition(1)</label></transition><transition><source ref="id8"/><target ref="id0"/><label kind="synchronisation" x="-152" y="-127">Halt?</label><nail x="218" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id8"/><target ref="id9"/><label kind="guard" x="238" y="-34">stackCondition[stackConditionIndex] == 1 &amp;&amp;
!addOperator</label><label kind="assignment" x="238" y="8">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = superstate,
globalValue = nil,
lookAheadIndex = 0,
globalDoesContain = 0,
globalIndex = 0</label></transition><transition><source ref="id9"/><target ref="id0"/><label kind="guard" x="-132" y="180">globalDoesContain == -1</label><label kind="assignment" x="-132" y="214">lookAheadArray = lookAheadDefault,
removeStackCondition()</label><nail x="218" y="200"/><nail x="-152" y="200"/></transition><transition><source ref="id9"/><target ref="id10"/><label kind="guard" x="613" y="17">globalDoesContain == 1</label><label kind="assignment" x="613" y="34">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = name,
globalValue = EMPTY,
lookAheadIndex = 1,
globalDoesContain = 0</label></transition><transition><source ref="id10"/><target ref="id0"/><label kind="guard" x="-132" y="380">globalDoesContain == -1</label><label kind="assignment" x="-132" y="414">lookAheadArray = lookAheadDefault,
removeStackCondition()</label><nail x="218" y="400"/><nail x="-152" y="400"/></transition><transition><source ref="id10"/><target ref="id11"/><label kind="guard" x="736" y="383">globalDoesContain == 1</label><label kind="assignment" x="736" y="400">removeStackCondition(),
addToStackAction(1),
productionFired = true,
lookAheadArray = lookAheadDefault</label><nail x="711" y="400"/><nail x="958" y="400"/></transition><transition><source ref="id11"/><target ref="id0"/><label kind="synchronisation" x="588" y="-127">Halt?</label><nail x="958" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id11"/><target ref="id12"/><label kind="guard" x="978" y="-34">stackConditionIndex == -1 &amp;&amp;
stackAction[stackActionIndex] == 1</label><label kind="assignment" x="978" y="8">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = operator,
globalValue = state_operator_2,
addOperator = true</label></transition><transition><source ref="id12"/><target ref="id13"/><label kind="guard" x="1353" y="17">!addOperator</label><label kind="assignment" x="1353" y="34">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = state_operator_2,
globalAttribute = name,
globalValue = initialize_drone,
addOperator = true</label></transition><transition><source ref="id13"/><target ref="id0"/><label kind="guard" x="1353" y="183">!addOperator</label><label kind="assignment" x="1353" y="200">addOperator = false,
removeStackAction(),
operators[1].operator.isAcceptable = true,
fillNextProduction()</label><nail x="1698" y="200"/><nail x="1698" y="-110"/><nail x="-152" y="-110"/></transition></template><template><name>drone_apply_initialize</name><declaration>int dummy_state_operator_$_o_1_$;
const int NUMBER_OF_PRODUCTIONS = 1;

typedef struct {
	int savedTempAndFunction[1];
} Production;

Production productions[NUMBER_OF_PRODUCTIONS];
int productionIndex = 0;
int productionIndexTemp;


void fillNextProduction() {
	productions[productionIndex].savedTempAndFunction[0] = dummy_state_operator_$_o_1_$;
	productionIndex++;
}

void checkProductionsContain() {
	bool containsProduction = false;
	int i;
	for (i = 0; i &lt; productionIndex; i++) {
		if (productions[i].savedTempAndFunction[0] == dummy_state_operator_$_o_1_$) {
				containsProduction = true;
				i = NUMBER_OF_PRODUCTIONS;
		}
	}
	if (containsProduction) {
		globalDoesContain = -1;
	} else {
		globalDoesContain = 1;
	}
}

int currentNumFiringPerCycle = 0;
void checkProductionHasOperator() {
	if (retractOperatorsIndex &gt; 0) {
		int i;
		int j;
		int removeProductionIndexes[NUMBER_OF_PRODUCTIONS];
		int removeIndex = 0;
		for (i = 0; i &lt; productionIndex; i++) {
			if (retractOperatorsContains(1 + getIDFromOperator(productions[i].savedTempAndFunction[0]))) {
				removeProductionIndexes[removeIndex++] = i;
			}
		}
		for (i = 0; i &lt; removeIndex; i++) {
			for (j = removeProductionIndexes[i]; j &lt; productionIndex - 1; j++) {
				productions[j] = productions[j+1];
			}
			productionIndex--;
		}
	}
}

</declaration><location id="id14" x="-152" y="0"><name x="-200" y="-32">Start</name><committed/></location><location id="id15" x="218" y="0"><name x="128" y="-32">Run_Guard</name><committed/></location><location id="id16" x="588" y="0"><committed/></location><location id="id17" x="588" y="200"><committed/></location><location id="id18" x="588" y="400"><committed/></location><location id="id19" x="958" y="0"><name x="818" y="-32">Run_Assignment</name><committed/></location><location id="id20" x="1328" y="0"><committed/></location><location id="id21" x="1328" y="200"><committed/></location><init ref="id14"/><transition><source ref="id14"/><target ref="id14"/><label kind="guard" x="-522" y="-34">!productionFired &amp;&amp;
isRetracting</label><label kind="synchronisation" x="-522" y="-51">Run_Rule?</label><label kind="assignment" x="-522" y="10">currentNumFiringPerCycle = 0</label><nail x="-522" y="0"/></transition><transition><source ref="id14"/><target ref="id14"/><label kind="synchronisation" x="-522" y="73">Reset_Apply?</label><label kind="assignment" x="-522" y="90">checkProductionHasOperator()</label><nail x="-152" y="100"/><nail x="-220" y="100"/><nail x="-220" y="0"/></transition><transition><source ref="id14"/><target ref="id15"/><label kind="guard" x="-132" y="-34">!isRetracting &amp;&amp;
currentNumFiringPerCycle != NUMBER_OF_PRODUCTIONS</label><label kind="synchronisation" x="-132" y="-51">Run_Rule?</label><label kind="assignment" x="-132" y="8">addToStackCondition(2)</label></transition><transition><source ref="id15"/><target ref="id14"/><label kind="synchronisation" x="-152" y="-127">Halt?</label><nail x="218" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id15"/><target ref="id16"/><label kind="guard" x="238" y="-34">stackCondition[stackConditionIndex] == 2 &amp;&amp;
!addOperator</label><label kind="assignment" x="238" y="8">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = finalOp,
globalAttribute = operator,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0,
globalIndex = 0</label></transition><transition><source ref="id16"/><target ref="id14"/><label kind="guard" x="-132" y="180">globalDoesContain == -1</label><label kind="assignment" x="-132" y="214">lookAheadArray = lookAheadDefault,
removeStackCondition()</label><nail x="218" y="200"/><nail x="-152" y="200"/></transition><transition><source ref="id16"/><target ref="id17"/><label kind="guard" x="613" y="17">globalDoesContain == 1</label><label kind="assignment" x="613" y="34">dummy_state_operator_$_o_1_$ = getOperatorFromID(globalValue - 1),
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_operator_$_o_1_$,
globalAttribute = name,
globalValue = initialize_drone,
lookAheadIndex = 1,
globalDoesContain = 0</label></transition><transition><source ref="id17"/><target ref="id16"/><label kind="guard" x="-112" y="380">globalDoesContain == -1</label><label kind="assignment" x="-112" y="414">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = finalOp,
globalAttribute = operator,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0</label><nail x="218" y="400"/><nail x="-152" y="400"/></transition><transition><source ref="id17"/><target ref="id18"/><label kind="guard" x="613" y="217">globalDoesContain == 1</label><label kind="assignment" x="613" y="234">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = 0,
globalAttribute = 0,
globalValue = 0,
globalDoesContain = 0,
checkProductionsContain()</label></transition><transition><source ref="id18"/><target ref="id16"/><label kind="guard" x="-112" y="580">globalDoesContain == -1</label><label kind="assignment" x="-112" y="614">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = finalOp,
globalAttribute = operator,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0</label><nail x="218" y="600"/><nail x="-152" y="600"/></transition><transition><source ref="id18"/><target ref="id19"/><label kind="guard" x="736" y="583">globalDoesContain == 1</label><label kind="assignment" x="736" y="600">removeStackCondition(),
addToStackAction(2),
productionFired = true,
lookAheadArray = lookAheadDefault</label><nail x="711" y="600"/><nail x="958" y="600"/></transition><transition><source ref="id19"/><target ref="id14"/><label kind="synchronisation" x="588" y="-127">Halt?</label><nail x="958" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id19"/><target ref="id20"/><label kind="guard" x="978" y="-34">stackConditionIndex == -1 &amp;&amp;
stackAction[stackActionIndex] == 2</label><label kind="assignment" x="978" y="8">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = name,
globalValue = droneFlight,
addOperator = true</label></transition><transition><source ref="id20"/><target ref="id21"/><label kind="guard" x="1353" y="17">!addOperator</label><label kind="assignment" x="1353" y="34">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = wait_flag,
globalValue = 1,
addOperator = true</label></transition><transition><source ref="id21"/><target ref="id14"/><label kind="guard" x="1353" y="183">!addOperator</label><label kind="assignment" x="1353" y="200">addOperator = false,
removeStackAction(),
currentNumFiringPerCycle++,
fillNextProduction()</label><nail x="1698" y="200"/><nail x="1698" y="-110"/><nail x="-152" y="-110"/></transition></template><template><name>proposeWait</name><declaration>int dummy_state_wait_flag_$_w_$;
const int NUMBER_OF_PRODUCTIONS = 1;

typedef struct {
	int savedTempAndFunction[1];
} Production;

Production productions[NUMBER_OF_PRODUCTIONS];
int productionIndex = 0;
int productionIndexTemp;


void fillNextProduction() {
	productions[productionIndex].savedTempAndFunction[0] = dummy_state_wait_flag_$_w_$;
	productionIndex++;
}

void checkProductionsContain() {
	bool containsProduction = false;
	int i;
	for (i = 0; i &lt; productionIndex; i++) {
		if (productions[i].savedTempAndFunction[0] == dummy_state_wait_flag_$_w_$) {
				containsProduction = true;
				i = NUMBER_OF_PRODUCTIONS;
		}
	}
	if (containsProduction) {
		globalDoesContain = -1;
	} else {
		globalDoesContain = 1;
	}
}


void checkAndClearFinalOperator() {
	 if(selectedFinalOperatorIndex == 1) {
		addToNestedCheckArray(finalOp);
	}
	retractOperators[retractOperatorsIndex++] = 1;
	clearOperator(0);
}
</declaration><location id="id22" x="-152" y="0"><name x="-200" y="-32">Start</name><committed/></location><location id="id23" x="-522" y="0"><name x="-702" y="-49">Retract_Conditions</name><committed/></location><location id="id24" x="-892" y="0"><committed/></location><location id="id25" x="-1262" y="0"><name x="-1452" y="-49">Retract_Assignments</name><committed/></location><location id="id26" x="-892" y="319"><committed/></location><location id="id27" x="-1632" y="0"><committed/></location><location id="id28" x="-1632" y="319"><committed/></location><location id="id29" x="-1632" y="519"><committed/></location><location id="id30" x="218" y="0"><name x="128" y="-32">Run_Guard</name><committed/></location><location id="id31" x="588" y="0"><committed/></location><location id="id32" x="588" y="200"><committed/></location><location id="id33" x="588" y="400"><committed/></location><location id="id34" x="958" y="0"><name x="818" y="-32">Run_Assignment</name><committed/></location><location id="id35" x="1328" y="0"><committed/></location><location id="id36" x="1328" y="200"><committed/></location><init ref="id22"/><transition><source ref="id22"/><target ref="id23"/><label kind="guard" x="-502" y="-17">isRetracting</label><label kind="synchronisation" x="-502" y="-34">Run_Rule?</label><label kind="assignment" x="-502" y="8">addToStackRetract(3),
productionIndexTemp = 0</label></transition><transition><source ref="id23"/><target ref="id22"/><label kind="guard" x="-714" y="-178">stackRetract[stackRetractIndex] == 3 &amp;&amp;
productionIndexTemp == productionIndex</label><label kind="assignment" x="-714" y="-144">productionIndexTemp = 0,
removeStackRetract()</label><nail x="-717" y="0"/><nail x="-717" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id23"/><target ref="id24"/><label kind="guard" x="-872" y="-34">productionIndexTemp != productionIndex &amp;&amp;
stackRetract[stackRetractIndex] == 3</label><label kind="assignment" x="-872" y="8">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[0],
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = wait_flag,
globalDoesContain = 0</label></transition><transition><source ref="id24"/><target ref="id25"/><label kind="guard" x="-1084" y="-17">globalDoesContain == -1</label></transition><transition><source ref="id24"/><target ref="id26"/><label kind="guard" x="-867" y="136">globalDoesContain == 1</label><label kind="assignment" x="-867" y="153">valueFunction = 0,
globalValue = droneFlight,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = name,
globalDoesContain = 0</label></transition><transition><source ref="id26"/><target ref="id25"/><label kind="guard" x="-1084" y="302">globalDoesContain == -1</label><nail x="-1262" y="319"/></transition><transition><source ref="id26"/><target ref="id23"/><label kind="guard" x="-1234" y="175">globalDoesContain == 1</label><label kind="assignment" x="-1234" y="192">productionIndexTemp++</label><nail x="-1237" y="319"/><nail x="-1237" y="-110"/><nail x="-522" y="-110"/></transition><transition><source ref="id25"/><target ref="id27"/><label kind="guard" x="-1612" y="-34">productionIndexTemp != productionIndex &amp;&amp;
stackRetract[stackRetractIndex] == 3</label><label kind="assignment" x="-1612" y="8">valueFunction = remove,
globalValue = state_operator_1,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = operator,
addOperator = true</label></transition><transition><source ref="id27"/><target ref="id28"/><label kind="guard" x="-1607" y="136">!addOperator</label><label kind="assignment" x="-1607" y="153">valueFunction = remove,
globalValue = Processing,
attributeFunction = 0,
globalIdentifier = state_operator_1,
globalAttribute = name,
addOperator = true,
checkAndClearFinalOperator()</label></transition><transition><source ref="id28"/><target ref="id29"/><label kind="guard" x="-1607" y="336">!addOperator</label><label kind="assignment" x="-1607" y="353">removeOperator = true,
globalIndex = 0,
currentNumAttributes =
getNumAttributes(nestedCheckArray[0])</label></transition><transition><source ref="id29"/><target ref="id23"/><label kind="guard" x="-1824" y="358">!removeOperator &amp;&amp;
currentNumAttributes == 0</label><label kind="assignment" x="-1824" y="392">productionIndex--</label><nail x="-1827" y="519"/><nail x="-1827" y="-110"/><nail x="-522" y="-110"/></transition><transition><source ref="id22"/><target ref="id30"/><label kind="guard" x="-132" y="-34">!isRetracting &amp;&amp;
productionIndex != NUMBER_OF_PRODUCTIONS</label><label kind="synchronisation" x="-132" y="-51">Run_Rule?</label><label kind="assignment" x="-132" y="8">addToStackCondition(3)</label></transition><transition><source ref="id30"/><target ref="id22"/><label kind="synchronisation" x="-152" y="-127">Halt?</label><nail x="218" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id30"/><target ref="id31"/><label kind="guard" x="238" y="-34">stackCondition[stackConditionIndex] == 3 &amp;&amp;
!addOperator</label><label kind="assignment" x="238" y="8">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = wait_flag,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0,
globalIndex = 0</label></transition><transition><source ref="id31"/><target ref="id22"/><label kind="guard" x="-132" y="180">globalDoesContain == -1</label><label kind="assignment" x="-132" y="214">lookAheadArray = lookAheadDefault,
removeStackCondition()</label><nail x="218" y="200"/><nail x="-152" y="200"/></transition><transition><source ref="id31"/><target ref="id32"/><label kind="guard" x="613" y="17">globalDoesContain == 1</label><label kind="assignment" x="613" y="34">dummy_state_wait_flag_$_w_$ = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = name,
globalValue = droneFlight,
lookAheadIndex = 1,
globalDoesContain = 0</label></transition><transition><source ref="id32"/><target ref="id31"/><label kind="guard" x="-112" y="380">globalDoesContain == -1</label><label kind="assignment" x="-112" y="414">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = wait_flag,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0</label><nail x="218" y="400"/><nail x="-152" y="400"/></transition><transition><source ref="id32"/><target ref="id33"/><label kind="guard" x="613" y="217">globalDoesContain == 1</label><label kind="assignment" x="613" y="234">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = 0,
globalAttribute = 0,
globalValue = 0,
globalDoesContain = 0,
checkProductionsContain()</label></transition><transition><source ref="id33"/><target ref="id31"/><label kind="guard" x="-112" y="580">globalDoesContain == -1</label><label kind="assignment" x="-112" y="614">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = wait_flag,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0</label><nail x="218" y="600"/><nail x="-152" y="600"/></transition><transition><source ref="id33"/><target ref="id34"/><label kind="guard" x="736" y="583">globalDoesContain == 1</label><label kind="assignment" x="736" y="600">removeStackCondition(),
addToStackAction(3),
productionFired = true,
lookAheadArray = lookAheadDefault</label><nail x="711" y="600"/><nail x="958" y="600"/></transition><transition><source ref="id34"/><target ref="id22"/><label kind="synchronisation" x="588" y="-127">Halt?</label><nail x="958" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id34"/><target ref="id35"/><label kind="guard" x="978" y="-34">stackConditionIndex == -1 &amp;&amp;
stackAction[stackActionIndex] == 3</label><label kind="assignment" x="978" y="8">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = operator,
globalValue = state_operator_1,
addOperator = true</label></transition><transition><source ref="id35"/><target ref="id36"/><label kind="guard" x="1353" y="17">!addOperator</label><label kind="assignment" x="1353" y="34">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = state_operator_1,
globalAttribute = name,
globalValue = Processing,
addOperator = true</label></transition><transition><source ref="id36"/><target ref="id22"/><label kind="guard" x="1353" y="183">!addOperator</label><label kind="assignment" x="1353" y="200">addOperator = false,
removeStackAction(),
operators[0].operator.isAcceptable = true,
operators[0].operator.isWorst = true,
fillNextProduction()</label><nail x="1698" y="200"/><nail x="1698" y="-110"/><nail x="-152" y="-110"/></transition></template><template><name>applyWait</name><declaration>int dummy_state_wait_flag_$_w_$;
int dummy_state_operator_$_o_$;
const int NUMBER_OF_PRODUCTIONS = 1;

typedef struct {
	int savedTempAndFunction[2];
} Production;

Production productions[NUMBER_OF_PRODUCTIONS];
int productionIndex = 0;
int productionIndexTemp;


void fillNextProduction() {
	productions[productionIndex].savedTempAndFunction[0] = dummy_state_wait_flag_$_w_$;
	productions[productionIndex].savedTempAndFunction[1] = dummy_state_operator_$_o_$;
	productionIndex++;
}

void checkProductionsContain() {
	bool containsProduction = false;
	int i;
	for (i = 0; i &lt; productionIndex; i++) {
		if (productions[i].savedTempAndFunction[0] == dummy_state_wait_flag_$_w_$ &amp;&amp;
			productions[i].savedTempAndFunction[1] == dummy_state_operator_$_o_$) {
				containsProduction = true;
				i = NUMBER_OF_PRODUCTIONS;
		}
	}
	if (containsProduction) {
		globalDoesContain = -1;
	} else {
		globalDoesContain = 1;
	}
}

int currentNumFiringPerCycle = 0;
void checkProductionHasOperator() {
	if (retractOperatorsIndex &gt; 0) {
		int i;
		int j;
		int removeProductionIndexes[NUMBER_OF_PRODUCTIONS];
		int removeIndex = 0;
		for (i = 0; i &lt; productionIndex; i++) {
			if (retractOperatorsContains(1 + getIDFromOperator(productions[i].savedTempAndFunction[1]))) {
				removeProductionIndexes[removeIndex++] = i;
			}
		}
		for (i = 0; i &lt; removeIndex; i++) {
			for (j = removeProductionIndexes[i]; j &lt; productionIndex - 1; j++) {
				productions[j] = productions[j+1];
			}
			productionIndex--;
		}
	}
}

</declaration><location id="id37" x="-152" y="0"><name x="-200" y="-32">Start</name><committed/></location><location id="id38" x="218" y="0"><name x="128" y="-32">Run_Guard</name><committed/></location><location id="id39" x="588" y="0"><committed/></location><location id="id40" x="588" y="200"><committed/></location><location id="id41" x="588" y="400"><committed/></location><location id="id42" x="588" y="600"><committed/></location><location id="id43" x="588" y="800"><committed/></location><location id="id44" x="958" y="0"><name x="818" y="-32">Run_Assignment</name><committed/></location><location id="id45" x="1328" y="0"><committed/></location><location id="id46" x="1328" y="200"><committed/></location><init ref="id37"/><transition><source ref="id37"/><target ref="id37"/><label kind="guard" x="-522" y="-34">!productionFired &amp;&amp;
isRetracting</label><label kind="synchronisation" x="-522" y="-51">Run_Rule?</label><label kind="assignment" x="-522" y="10">currentNumFiringPerCycle = 0</label><nail x="-522" y="0"/></transition><transition><source ref="id37"/><target ref="id37"/><label kind="synchronisation" x="-522" y="73">Reset_Apply?</label><label kind="assignment" x="-522" y="90">checkProductionHasOperator()</label><nail x="-152" y="100"/><nail x="-220" y="100"/><nail x="-220" y="0"/></transition><transition><source ref="id37"/><target ref="id38"/><label kind="guard" x="-132" y="-34">!isRetracting &amp;&amp;
currentNumFiringPerCycle != NUMBER_OF_PRODUCTIONS</label><label kind="synchronisation" x="-132" y="-51">Run_Rule?</label><label kind="assignment" x="-132" y="8">addToStackCondition(4)</label></transition><transition><source ref="id38"/><target ref="id37"/><label kind="synchronisation" x="-152" y="-127">Halt?</label><nail x="218" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id38"/><target ref="id39"/><label kind="guard" x="238" y="-34">stackCondition[stackConditionIndex] == 4 &amp;&amp;
!addOperator</label><label kind="assignment" x="238" y="8">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = finalOp,
globalAttribute = operator,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0,
globalIndex = 0</label></transition><transition><source ref="id39"/><target ref="id37"/><label kind="guard" x="-132" y="180">globalDoesContain == -1</label><label kind="assignment" x="-132" y="214">lookAheadArray = lookAheadDefault,
removeStackCondition()</label><nail x="218" y="200"/><nail x="-152" y="200"/></transition><transition><source ref="id39"/><target ref="id40"/><label kind="guard" x="613" y="17">globalDoesContain == 1</label><label kind="assignment" x="613" y="34">dummy_state_operator_$_o_$ = getOperatorFromID(globalValue - 1),
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = wait_flag,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label></transition><transition><source ref="id40"/><target ref="id39"/><label kind="guard" x="-112" y="380">globalDoesContain == -1</label><label kind="assignment" x="-112" y="414">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = finalOp,
globalAttribute = operator,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0</label><nail x="218" y="400"/><nail x="-152" y="400"/></transition><transition><source ref="id40"/><target ref="id41"/><label kind="guard" x="613" y="217">globalDoesContain == 1</label><label kind="assignment" x="613" y="234">dummy_state_wait_flag_$_w_$ = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = name,
globalValue = droneFlight,
lookAheadIndex = 2,
globalDoesContain = 0</label></transition><transition><source ref="id41"/><target ref="id40"/><label kind="guard" x="-112" y="580">globalDoesContain == -1</label><label kind="assignment" x="-112" y="614">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = wait_flag,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label><nail x="218" y="600"/><nail x="-152" y="600"/></transition><transition><source ref="id41"/><target ref="id42"/><label kind="guard" x="613" y="417">globalDoesContain == 1</label><label kind="assignment" x="613" y="434">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_operator_$_o_$,
globalAttribute = name,
globalValue = Processing,
lookAheadIndex = 3,
globalDoesContain = 0</label></transition><transition><source ref="id42"/><target ref="id40"/><label kind="guard" x="-112" y="780">globalDoesContain == -1</label><label kind="assignment" x="-112" y="814">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = wait_flag,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label><nail x="218" y="800"/><nail x="-152" y="800"/></transition><transition><source ref="id42"/><target ref="id43"/><label kind="guard" x="613" y="617">globalDoesContain == 1</label><label kind="assignment" x="613" y="634">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = 0,
globalAttribute = 0,
globalValue = 0,
globalDoesContain = 0,
checkProductionsContain()</label></transition><transition><source ref="id43"/><target ref="id40"/><label kind="guard" x="-112" y="980">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1014">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = wait_flag,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label><nail x="218" y="1000"/><nail x="-152" y="1000"/></transition><transition><source ref="id43"/><target ref="id44"/><label kind="guard" x="736" y="983">globalDoesContain == 1</label><label kind="assignment" x="736" y="1000">removeStackCondition(),
addToStackAction(4),
productionFired = true,
lookAheadArray = lookAheadDefault</label><nail x="711" y="1000"/><nail x="958" y="1000"/></transition><transition><source ref="id44"/><target ref="id37"/><label kind="synchronisation" x="588" y="-127">Halt?</label><nail x="958" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id44"/><target ref="id45"/><label kind="guard" x="978" y="-34">stackConditionIndex == -1 &amp;&amp;
stackAction[stackActionIndex] == 4</label><label kind="assignment" x="978" y="8">valueFunction = remove,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = wait_flag,
globalValue = dummy_state_wait_flag_$_w_$,
addOperator = true</label></transition><transition><source ref="id45"/><target ref="id46"/><label kind="guard" x="1353" y="17">!addOperator</label><label kind="assignment" x="1353" y="34">valueFunction = subtractFunction,
attributeFunction = 1,
globalIdentifier = _state,
globalAttribute = wait_flag,
globalValue = dummy_state_wait_flag_$_w_$,
addOperator = true</label></transition><transition><source ref="id46"/><target ref="id37"/><label kind="guard" x="1353" y="183">!addOperator</label><label kind="assignment" x="1353" y="200">addOperator = false,
removeStackAction(),
currentNumFiringPerCycle++,
fillNextProduction()</label><nail x="1698" y="200"/><nail x="1698" y="-110"/><nail x="-152" y="-110"/></transition></template><template><name>drone_apply_operator_C2_Lost_Link</name><declaration>int dummy_state_currentTime_$_current_time_$;
int dummy_state_io_input_link_$_fd_$;
int dummy_dummy_state_io_input_link;
int dummy_state_io;
const int NUMBER_OF_PRODUCTIONS = 1;

typedef struct {
	int savedTempAndFunction[4];
} Production;

Production productions[NUMBER_OF_PRODUCTIONS];
int productionIndex = 0;
int productionIndexTemp;


void fillNextProduction() {
	productions[productionIndex].savedTempAndFunction[0] = dummy_state_currentTime_$_current_time_$;
	productions[productionIndex].savedTempAndFunction[1] = dummy_state_io_input_link_$_fd_$;
	productions[productionIndex].savedTempAndFunction[2] = dummy_dummy_state_io_input_link;
	productions[productionIndex].savedTempAndFunction[3] = dummy_state_io;
	productionIndex++;
}

void checkProductionsContain() {
	bool containsProduction = false;
	int i;
	for (i = 0; i &lt; productionIndex; i++) {
		if (productions[i].savedTempAndFunction[1] == dummy_state_io_input_link_$_fd_$ &amp;&amp;
			productions[i].savedTempAndFunction[0] == dummy_state_currentTime_$_current_time_$ &amp;&amp;
			productions[i].savedTempAndFunction[2] == dummy_dummy_state_io_input_link &amp;&amp;
			productions[i].savedTempAndFunction[3] == dummy_state_io) {
				containsProduction = true;
				i = NUMBER_OF_PRODUCTIONS;
		}
	}
	if (containsProduction) {
		globalDoesContain = -1;
	} else {
		globalDoesContain = 1;
	}
}

</declaration><location id="id47" x="-152" y="0"><name x="-200" y="-32">Start</name><committed/></location><location id="id48" x="-522" y="0"><name x="-702" y="-49">Retract_Conditions</name><committed/></location><location id="id49" x="-892" y="0"><committed/></location><location id="id50" x="-1262" y="0"><name x="-1452" y="-49">Retract_Assignments</name><committed/></location><location id="id51" x="-892" y="319"><committed/></location><location id="id52" x="-892" y="519"><committed/></location><location id="id53" x="-892" y="719"><committed/></location><location id="id54" x="-892" y="919"><committed/></location><location id="id55" x="-892" y="1119"><committed/></location><location id="id56" x="-892" y="1319"><committed/></location><location id="id57" x="-892" y="1519"><committed/></location><location id="id58" x="-892" y="1719"><committed/></location><location id="id59" x="-1632" y="0"><committed/></location><location id="id60" x="-1632" y="319"><committed/></location><location id="id61" x="-1632" y="519"><committed/></location><location id="id62" x="-1632" y="719"><committed/></location><location id="id63" x="-1632" y="919"><committed/></location><location id="id64" x="218" y="0"><name x="128" y="-32">Run_Guard</name><committed/></location><location id="id65" x="588" y="0"><committed/></location><location id="id66" x="588" y="200"><committed/></location><location id="id67" x="588" y="400"><committed/></location><location id="id68" x="588" y="600"><committed/></location><location id="id69" x="588" y="800"><committed/></location><location id="id70" x="588" y="1000"><committed/></location><location id="id71" x="588" y="1200"><committed/></location><location id="id72" x="588" y="1400"><committed/></location><location id="id73" x="588" y="1600"><committed/></location><location id="id74" x="588" y="1800"><committed/></location><location id="id75" x="958" y="0"><name x="818" y="-32">Run_Assignment</name><committed/></location><location id="id76" x="1328" y="0"><committed/></location><location id="id77" x="1328" y="200"><committed/></location><location id="id78" x="1328" y="400"><committed/></location><location id="id79" x="1328" y="600"><committed/></location><init ref="id47"/><transition><source ref="id47"/><target ref="id48"/><label kind="guard" x="-502" y="-17">isRetracting</label><label kind="synchronisation" x="-502" y="-34">Run_Rule?</label><label kind="assignment" x="-502" y="8">addToStackRetract(5),
productionIndexTemp = 0</label></transition><transition><source ref="id48"/><target ref="id47"/><label kind="guard" x="-714" y="-178">stackRetract[stackRetractIndex] == 5 &amp;&amp;
productionIndexTemp == productionIndex</label><label kind="assignment" x="-714" y="-144">productionIndexTemp = 0,
removeStackRetract()</label><nail x="-717" y="0"/><nail x="-717" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id48"/><target ref="id49"/><label kind="guard" x="-872" y="-34">productionIndexTemp != productionIndex &amp;&amp;
stackRetract[stackRetractIndex] == 5</label><label kind="assignment" x="-872" y="8">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[1],
attributeFunction = 0,
globalIdentifier = dummy_dummy_state_io_input_link,
globalAttribute = flightdata,
globalDoesContain = 0</label></transition><transition><source ref="id49"/><target ref="id50"/><label kind="guard" x="-1084" y="-17">globalDoesContain == -1</label></transition><transition><source ref="id49"/><target ref="id51"/><label kind="guard" x="-867" y="136">globalDoesContain == 1</label><label kind="assignment" x="-867" y="153">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[0],
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = currentTime,
globalDoesContain = 0</label></transition><transition><source ref="id51"/><target ref="id50"/><label kind="guard" x="-1084" y="302">globalDoesContain == -1</label><nail x="-1262" y="319"/></transition><transition><source ref="id51"/><target ref="id52"/><label kind="guard" x="-867" y="336">globalDoesContain == 1</label><label kind="assignment" x="-867" y="353">valueFunction = 0,
globalValue = droneFlight,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = name,
globalDoesContain = 0</label></transition><transition><source ref="id52"/><target ref="id50"/><label kind="guard" x="-1084" y="502">globalDoesContain == -1</label><nail x="-1262" y="519"/></transition><transition><source ref="id52"/><target ref="id53"/><label kind="guard" x="-867" y="536">globalDoesContain == 1</label><label kind="assignment" x="-867" y="553">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[3],
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = io,
globalDoesContain = 0</label></transition><transition><source ref="id53"/><target ref="id50"/><label kind="guard" x="-1084" y="702">globalDoesContain == -1</label><nail x="-1262" y="719"/></transition><transition><source ref="id53"/><target ref="id54"/><label kind="guard" x="-867" y="736">globalDoesContain == 1</label><label kind="assignment" x="-867" y="753">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[2],
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalDoesContain = 0</label></transition><transition><source ref="id54"/><target ref="id50"/><label kind="guard" x="-1084" y="902">globalDoesContain == -1</label><nail x="-1262" y="919"/></transition><transition><source ref="id54"/><target ref="id55"/><label kind="guard" x="-867" y="936">globalDoesContain == 1</label><label kind="assignment" x="-867" y="953">valueFunction = 0,
globalValue = EMPTY,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = addressedProblem,
globalDoesContain = 0</label></transition><transition><source ref="id55"/><target ref="id50"/><label kind="guard" x="-1084" y="1102">globalDoesContain == -1</label><nail x="-1262" y="1119"/></transition><transition><source ref="id55"/><target ref="id56"/><label kind="guard" x="-867" y="1136">globalDoesContain == 1</label><label kind="assignment" x="-867" y="1153">valueFunction = 0,
globalValue = setAIOn,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = acknowledgedCommands,
globalDoesContain = 0</label></transition><transition><source ref="id56"/><target ref="id50"/><label kind="guard" x="-1084" y="1302">globalDoesContain == -1</label><nail x="-1262" y="1319"/></transition><transition><source ref="id56"/><target ref="id57"/><label kind="guard" x="-867" y="1336">globalDoesContain == 1</label><label kind="assignment" x="-867" y="1353">valueFunction = 0,
globalValue = yes,
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = takeOver,
globalDoesContain = 0</label></transition><transition><source ref="id57"/><target ref="id50"/><label kind="guard" x="-1084" y="1502">globalDoesContain == -1</label><nail x="-1262" y="1519"/></transition><transition><source ref="id57"/><target ref="id58"/><label kind="guard" x="-867" y="1536">globalDoesContain == 1</label><label kind="assignment" x="-867" y="1553">valueFunction = 0,
globalValue = no,
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = populated,
globalDoesContain = 0</label></transition><transition><source ref="id58"/><target ref="id50"/><label kind="guard" x="-1084" y="1702">globalDoesContain == -1</label><nail x="-1262" y="1719"/></transition><transition><source ref="id58"/><target ref="id48"/><label kind="guard" x="-1234" y="1575">globalDoesContain == 1</label><label kind="assignment" x="-1234" y="1592">productionIndexTemp++</label><nail x="-1237" y="1719"/><nail x="-1237" y="-110"/><nail x="-522" y="-110"/></transition><transition><source ref="id50"/><target ref="id59"/><label kind="guard" x="-1612" y="-34">productionIndexTemp != productionIndex &amp;&amp;
stackRetract[stackRetractIndex] == 5</label><label kind="assignment" x="-1612" y="8">valueFunction = remove,
globalValue = C2,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = addressedProblem,
addOperator = true</label></transition><transition><source ref="id59"/><target ref="id60"/><label kind="guard" x="-1607" y="136">!addOperator</label><label kind="assignment" x="-1607" y="153">valueFunction = remove,
globalValue = 1,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = maxTimers,
addOperator = true</label></transition><transition><source ref="id60"/><target ref="id61"/><label kind="guard" x="-1607" y="336">!addOperator</label><label kind="assignment" x="-1607" y="353">valueFunction = remove,
globalValue = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
addOperator = true</label></transition><transition><source ref="id61"/><target ref="id62"/><label kind="guard" x="-1607" y="536">!addOperator</label><label kind="assignment" x="-1607" y="553">valueFunction = remove,
globalValue = yes,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = startNewTimer,
addOperator = true</label></transition><transition><source ref="id62"/><target ref="id63"/><label kind="guard" x="-1607" y="736">!addOperator</label><label kind="assignment" x="-1607" y="753">removeOperator = true,
globalIndex = 0,
currentNumAttributes =
getNumAttributes(nestedCheckArray[0])</label></transition><transition><source ref="id63"/><target ref="id48"/><label kind="guard" x="-1824" y="758">!removeOperator &amp;&amp;
currentNumAttributes == 0</label><label kind="assignment" x="-1824" y="792">productionIndex--</label><nail x="-1827" y="919"/><nail x="-1827" y="-110"/><nail x="-522" y="-110"/></transition><transition><source ref="id47"/><target ref="id64"/><label kind="guard" x="-132" y="-34">!isRetracting &amp;&amp;
productionIndex != NUMBER_OF_PRODUCTIONS</label><label kind="synchronisation" x="-132" y="-51">Run_Rule?</label><label kind="assignment" x="-132" y="8">addToStackCondition(5)</label></transition><transition><source ref="id64"/><target ref="id47"/><label kind="synchronisation" x="-152" y="-127">Halt?</label><nail x="218" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id64"/><target ref="id65"/><label kind="guard" x="238" y="-34">stackCondition[stackConditionIndex] == 5 &amp;&amp;
!addOperator</label><label kind="assignment" x="238" y="8">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_dummy_state_io_input_link,
globalAttribute = flightdata,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0,
globalIndex = 0</label></transition><transition><source ref="id65"/><target ref="id47"/><label kind="guard" x="-132" y="180">globalDoesContain == -1</label><label kind="assignment" x="-132" y="214">lookAheadArray = lookAheadDefault,
removeStackCondition()</label><nail x="218" y="200"/><nail x="-152" y="200"/></transition><transition><source ref="id65"/><target ref="id66"/><label kind="guard" x="613" y="17">globalDoesContain == 1</label><label kind="assignment" x="613" y="34">dummy_state_io_input_link_$_fd_$ = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = currentTime,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label></transition><transition><source ref="id66"/><target ref="id65"/><label kind="guard" x="-112" y="380">globalDoesContain == -1</label><label kind="assignment" x="-112" y="414">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_dummy_state_io_input_link,
globalAttribute = flightdata,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0</label><nail x="218" y="400"/><nail x="-152" y="400"/></transition><transition><source ref="id66"/><target ref="id67"/><label kind="guard" x="613" y="217">globalDoesContain == 1</label><label kind="assignment" x="613" y="234">dummy_state_currentTime_$_current_time_$ = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = name,
globalValue = droneFlight,
lookAheadIndex = 2,
globalDoesContain = 0</label></transition><transition><source ref="id67"/><target ref="id66"/><label kind="guard" x="-112" y="580">globalDoesContain == -1</label><label kind="assignment" x="-112" y="614">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = currentTime,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label><nail x="218" y="600"/><nail x="-152" y="600"/></transition><transition><source ref="id67"/><target ref="id68"/><label kind="guard" x="613" y="417">globalDoesContain == 1</label><label kind="assignment" x="613" y="434">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = io,
globalValue = nilAnything,
lookAheadIndex = 3,
globalDoesContain = 0</label></transition><transition><source ref="id68"/><target ref="id66"/><label kind="guard" x="-112" y="780">globalDoesContain == -1</label><label kind="assignment" x="-112" y="814">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = currentTime,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label><nail x="218" y="800"/><nail x="-152" y="800"/></transition><transition><source ref="id68"/><target ref="id69"/><label kind="guard" x="613" y="617">globalDoesContain == 1</label><label kind="assignment" x="613" y="634">dummy_state_io = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalValue = nilAnything,
lookAheadIndex = 4,
globalDoesContain = 0</label></transition><transition><source ref="id69"/><target ref="id68"/><label kind="guard" x="-112" y="980">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1014">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = io,
globalValue = nilAnything,
lookAheadIndex = 3,
globalDoesContain = 0</label><nail x="218" y="1000"/><nail x="-152" y="1000"/></transition><transition><source ref="id69"/><target ref="id70"/><label kind="guard" x="613" y="817">globalDoesContain == 1</label><label kind="assignment" x="613" y="834">dummy_dummy_state_io_input_link = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = addressedProblem,
globalValue = EMPTY,
lookAheadIndex = 5,
globalDoesContain = 0</label></transition><transition><source ref="id70"/><target ref="id69"/><label kind="guard" x="-112" y="1180">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1214">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalValue = nilAnything,
lookAheadIndex = 4,
globalDoesContain = 0</label><nail x="218" y="1200"/><nail x="-152" y="1200"/></transition><transition><source ref="id70"/><target ref="id71"/><label kind="guard" x="613" y="1017">globalDoesContain == 1</label><label kind="assignment" x="613" y="1034">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = acknowledgedCommands,
globalValue = setAIOn,
lookAheadIndex = 6,
globalDoesContain = 0</label></transition><transition><source ref="id71"/><target ref="id69"/><label kind="guard" x="-112" y="1380">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1414">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalValue = nilAnything,
lookAheadIndex = 4,
globalDoesContain = 0</label><nail x="218" y="1400"/><nail x="-152" y="1400"/></transition><transition><source ref="id71"/><target ref="id72"/><label kind="guard" x="613" y="1217">globalDoesContain == 1</label><label kind="assignment" x="613" y="1234">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = takeOver,
globalValue = yes,
lookAheadIndex = 7,
globalDoesContain = 0</label></transition><transition><source ref="id72"/><target ref="id69"/><label kind="guard" x="-112" y="1580">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1614">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalValue = nilAnything,
lookAheadIndex = 4,
globalDoesContain = 0</label><nail x="218" y="1600"/><nail x="-152" y="1600"/></transition><transition><source ref="id72"/><target ref="id73"/><label kind="guard" x="613" y="1417">globalDoesContain == 1</label><label kind="assignment" x="613" y="1434">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = populated,
globalValue = no,
lookAheadIndex = 8,
globalDoesContain = 0</label></transition><transition><source ref="id73"/><target ref="id69"/><label kind="guard" x="-112" y="1780">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1814">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalValue = nilAnything,
lookAheadIndex = 4,
globalDoesContain = 0</label><nail x="218" y="1800"/><nail x="-152" y="1800"/></transition><transition><source ref="id73"/><target ref="id74"/><label kind="guard" x="613" y="1617">globalDoesContain == 1</label><label kind="assignment" x="613" y="1634">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = 0,
globalAttribute = 0,
globalValue = 0,
globalDoesContain = 0,
checkProductionsContain()</label></transition><transition><source ref="id74"/><target ref="id69"/><label kind="guard" x="-112" y="1980">globalDoesContain == -1</label><label kind="assignment" x="-112" y="2014">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalValue = nilAnything,
lookAheadIndex = 4,
globalDoesContain = 0</label><nail x="218" y="2000"/><nail x="-152" y="2000"/></transition><transition><source ref="id74"/><target ref="id75"/><label kind="guard" x="736" y="1983">globalDoesContain == 1</label><label kind="assignment" x="736" y="2000">removeStackCondition(),
addToStackAction(5),
productionFired = true,
lookAheadArray = lookAheadDefault</label><nail x="711" y="2000"/><nail x="958" y="2000"/></transition><transition><source ref="id75"/><target ref="id47"/><label kind="synchronisation" x="588" y="-127">Halt?</label><nail x="958" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id75"/><target ref="id76"/><label kind="guard" x="978" y="-34">stackConditionIndex == -1 &amp;&amp;
stackAction[stackActionIndex] == 5</label><label kind="assignment" x="978" y="8">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = addressedProblem,
globalValue = C2,
addOperator = true</label></transition><transition><source ref="id76"/><target ref="id77"/><label kind="guard" x="1353" y="17">!addOperator</label><label kind="assignment" x="1353" y="34">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = maxTimers,
globalValue = 1,
addOperator = true</label></transition><transition><source ref="id77"/><target ref="id78"/><label kind="guard" x="1353" y="217">!addOperator</label><label kind="assignment" x="1353" y="234">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
globalValue = 0,
addOperator = true</label></transition><transition><source ref="id78"/><target ref="id79"/><label kind="guard" x="1353" y="417">!addOperator</label><label kind="assignment" x="1353" y="434">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = startNewTimer,
globalValue = yes,
addOperator = true</label></transition><transition><source ref="id79"/><target ref="id47"/><label kind="guard" x="1353" y="583">!addOperator</label><label kind="assignment" x="1353" y="600">addOperator = false,
removeStackAction(),
fillNextProduction()</label><nail x="1698" y="600"/><nail x="1698" y="-110"/><nail x="-152" y="-110"/></transition></template><template><name>drone_apply_returnToBase_populated</name><declaration>int dummy_state_maxTimers_$_mT_$;
int dummy_state_io_input_link_$_fd_$;
int dummy_dummy_state_io_input_link;
int dummy_state_io;
int dummy_state_currentTimers_$_cT_$;
const int NUMBER_OF_PRODUCTIONS = 1;

typedef struct {
	int savedTempAndFunction[5];
} Production;

Production productions[NUMBER_OF_PRODUCTIONS];
int productionIndex = 0;
int productionIndexTemp;


void fillNextProduction() {
	productions[productionIndex].savedTempAndFunction[0] = dummy_state_maxTimers_$_mT_$;
	productions[productionIndex].savedTempAndFunction[1] = dummy_state_io_input_link_$_fd_$;
	productions[productionIndex].savedTempAndFunction[2] = dummy_dummy_state_io_input_link;
	productions[productionIndex].savedTempAndFunction[3] = dummy_state_io;
	productions[productionIndex].savedTempAndFunction[4] = dummy_state_currentTimers_$_cT_$;
	productionIndex++;
}

void checkProductionsContain() {
	bool containsProduction = false;
	int i;
	for (i = 0; i &lt; productionIndex; i++) {
		if (productions[i].savedTempAndFunction[1] == dummy_state_io_input_link_$_fd_$ &amp;&amp;
			productions[i].savedTempAndFunction[2] == dummy_dummy_state_io_input_link &amp;&amp;
			productions[i].savedTempAndFunction[3] == dummy_state_io &amp;&amp;
			productions[i].savedTempAndFunction[0] == dummy_state_maxTimers_$_mT_$ &amp;&amp;
			productions[i].savedTempAndFunction[4] == dummy_state_currentTimers_$_cT_$) {
				containsProduction = true;
				i = NUMBER_OF_PRODUCTIONS;
		}
	}
	if (containsProduction) {
		globalDoesContain = -1;
	} else {
		globalDoesContain = 1;
	}
}

</declaration><location id="id80" x="-152" y="0"><name x="-200" y="-32">Start</name><committed/></location><location id="id81" x="-522" y="0"><name x="-702" y="-49">Retract_Conditions</name><committed/></location><location id="id82" x="-892" y="0"><committed/></location><location id="id83" x="-1262" y="0"><name x="-1452" y="-49">Retract_Assignments</name><committed/></location><location id="id84" x="-892" y="319"><committed/></location><location id="id85" x="-892" y="519"><committed/></location><location id="id86" x="-892" y="719"><committed/></location><location id="id87" x="-892" y="919"><committed/></location><location id="id88" x="-892" y="1119"><committed/></location><location id="id89" x="-892" y="1319"><committed/></location><location id="id90" x="-892" y="1519"><committed/></location><location id="id91" x="-1632" y="0"><committed/></location><location id="id92" x="-1632" y="319"><committed/></location><location id="id93" x="-1632" y="519"><committed/></location><location id="id94" x="-1632" y="719"><committed/></location><location id="id95" x="-1632" y="919"><committed/></location><location id="id96" x="218" y="0"><name x="128" y="-32">Run_Guard</name><committed/></location><location id="id97" x="588" y="0"><committed/></location><location id="id98" x="588" y="200"><committed/></location><location id="id99" x="588" y="400"><committed/></location><location id="id100" x="588" y="600"><committed/></location><location id="id101" x="588" y="800"><committed/></location><location id="id102" x="588" y="1000"><committed/></location><location id="id103" x="588" y="1200"><committed/></location><location id="id104" x="588" y="1400"><committed/></location><location id="id105" x="588" y="1600"><committed/></location><location id="id106" x="958" y="0"><name x="818" y="-32">Run_Assignment</name><committed/></location><location id="id107" x="1328" y="0"><committed/></location><location id="id108" x="1328" y="200"><committed/></location><location id="id109" x="1328" y="400"><committed/></location><location id="id110" x="1328" y="600"><committed/></location><init ref="id80"/><transition><source ref="id80"/><target ref="id81"/><label kind="guard" x="-502" y="-17">isRetracting</label><label kind="synchronisation" x="-502" y="-34">Run_Rule?</label><label kind="assignment" x="-502" y="8">addToStackRetract(6),
productionIndexTemp = 0</label></transition><transition><source ref="id81"/><target ref="id80"/><label kind="guard" x="-714" y="-178">stackRetract[stackRetractIndex] == 6 &amp;&amp;
productionIndexTemp == productionIndex</label><label kind="assignment" x="-714" y="-144">productionIndexTemp = 0,
removeStackRetract()</label><nail x="-717" y="0"/><nail x="-717" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id81"/><target ref="id82"/><label kind="guard" x="-872" y="-34">productionIndexTemp != productionIndex &amp;&amp;
stackRetract[stackRetractIndex] == 6</label><label kind="assignment" x="-872" y="8">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[1],
attributeFunction = 0,
globalIdentifier = dummy_dummy_state_io_input_link,
globalAttribute = flightdata,
globalDoesContain = 0</label></transition><transition><source ref="id82"/><target ref="id83"/><label kind="guard" x="-1084" y="-17">globalDoesContain == -1</label></transition><transition><source ref="id82"/><target ref="id84"/><label kind="guard" x="-867" y="136">globalDoesContain == 1</label><label kind="assignment" x="-867" y="153">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[0],
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = maxTimers,
globalDoesContain = 0</label></transition><transition><source ref="id84"/><target ref="id83"/><label kind="guard" x="-1084" y="302">globalDoesContain == -1</label><nail x="-1262" y="319"/></transition><transition><source ref="id84"/><target ref="id85"/><label kind="guard" x="-867" y="336">globalDoesContain == 1</label><label kind="assignment" x="-867" y="353">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[4],
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
globalDoesContain = 0</label></transition><transition><source ref="id85"/><target ref="id83"/><label kind="guard" x="-1084" y="502">globalDoesContain == -1</label><nail x="-1262" y="519"/></transition><transition><source ref="id85"/><target ref="id86"/><label kind="guard" x="-867" y="536">globalDoesContain == 1</label><label kind="assignment" x="-867" y="553">valueFunction = 0,
globalValue = droneFlight,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = name,
globalDoesContain = 0</label></transition><transition><source ref="id86"/><target ref="id83"/><label kind="guard" x="-1084" y="702">globalDoesContain == -1</label><nail x="-1262" y="719"/></transition><transition><source ref="id86"/><target ref="id87"/><label kind="guard" x="-867" y="736">globalDoesContain == 1</label><label kind="assignment" x="-867" y="753">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[3],
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = io,
globalDoesContain = 0</label></transition><transition><source ref="id87"/><target ref="id83"/><label kind="guard" x="-1084" y="902">globalDoesContain == -1</label><nail x="-1262" y="919"/></transition><transition><source ref="id87"/><target ref="id88"/><label kind="guard" x="-867" y="936">globalDoesContain == 1</label><label kind="assignment" x="-867" y="953">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[2],
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalDoesContain = 0</label></transition><transition><source ref="id88"/><target ref="id83"/><label kind="guard" x="-1084" y="1102">globalDoesContain == -1</label><nail x="-1262" y="1119"/></transition><transition><source ref="id88"/><target ref="id89"/><label kind="guard" x="-867" y="1136">globalDoesContain == 1</label><label kind="assignment" x="-867" y="1153">valueFunction = 0,
globalValue = yes,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = willBeInPopulatedArea,
globalDoesContain = 0</label></transition><transition><source ref="id89"/><target ref="id83"/><label kind="guard" x="-1084" y="1302">globalDoesContain == -1</label><nail x="-1262" y="1319"/></transition><transition><source ref="id89"/><target ref="id90"/><label kind="guard" x="-867" y="1336">globalDoesContain == 1</label><label kind="assignment" x="-867" y="1353">valueFunction = 0,
globalValue = yes,
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = takeOver,
globalDoesContain = 0</label></transition><transition><source ref="id90"/><target ref="id83"/><label kind="guard" x="-1084" y="1502">globalDoesContain == -1</label><nail x="-1262" y="1519"/></transition><transition><source ref="id90"/><target ref="id81"/><label kind="guard" x="-1234" y="1375">globalDoesContain == 1</label><label kind="assignment" x="-1234" y="1392">productionIndexTemp++</label><nail x="-1237" y="1519"/><nail x="-1237" y="-110"/><nail x="-522" y="-110"/></transition><transition><source ref="id83"/><target ref="id91"/><label kind="guard" x="-1612" y="-34">productionIndexTemp != productionIndex &amp;&amp;
stackRetract[stackRetractIndex] == 6</label><label kind="assignment" x="-1612" y="8">valueFunction = remove,
globalValue = dummy_state_currentTimers_$_cT_$,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
addOperator = true</label></transition><transition><source ref="id91"/><target ref="id92"/><label kind="guard" x="-1607" y="136">!addOperator</label><label kind="assignment" x="-1607" y="153">valueFunction = remove,
globalValue = dummy_state_maxTimers_$_mT_$,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = maxTimers,
addOperator = true</label></transition><transition><source ref="id92"/><target ref="id93"/><label kind="guard" x="-1607" y="336">!addOperator</label><label kind="assignment" x="-1607" y="353">valueFunction = remove,
globalValue = yes,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = willBeInPopulatedArea,
addOperator = true</label></transition><transition><source ref="id93"/><target ref="id94"/><label kind="guard" x="-1607" y="536">!addOperator</label><label kind="assignment" x="-1607" y="553">valueFunction = remove,
globalValue = reverse,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = sentCommand,
addOperator = true</label></transition><transition><source ref="id94"/><target ref="id95"/><label kind="guard" x="-1607" y="736">!addOperator</label><label kind="assignment" x="-1607" y="753">removeOperator = true,
globalIndex = 0,
currentNumAttributes =
getNumAttributes(nestedCheckArray[0])</label></transition><transition><source ref="id95"/><target ref="id81"/><label kind="guard" x="-1824" y="758">!removeOperator &amp;&amp;
currentNumAttributes == 0</label><label kind="assignment" x="-1824" y="792">productionIndex--</label><nail x="-1827" y="919"/><nail x="-1827" y="-110"/><nail x="-522" y="-110"/></transition><transition><source ref="id80"/><target ref="id96"/><label kind="guard" x="-132" y="-34">!isRetracting &amp;&amp;
productionIndex != NUMBER_OF_PRODUCTIONS</label><label kind="synchronisation" x="-132" y="-51">Run_Rule?</label><label kind="assignment" x="-132" y="8">addToStackCondition(6)</label></transition><transition><source ref="id96"/><target ref="id80"/><label kind="synchronisation" x="-152" y="-127">Halt?</label><nail x="218" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id96"/><target ref="id97"/><label kind="guard" x="238" y="-34">stackCondition[stackConditionIndex] == 6 &amp;&amp;
!addOperator</label><label kind="assignment" x="238" y="8">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_dummy_state_io_input_link,
globalAttribute = flightdata,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0,
globalIndex = 0</label></transition><transition><source ref="id97"/><target ref="id80"/><label kind="guard" x="-132" y="180">globalDoesContain == -1</label><label kind="assignment" x="-132" y="214">lookAheadArray = lookAheadDefault,
removeStackCondition()</label><nail x="218" y="200"/><nail x="-152" y="200"/></transition><transition><source ref="id97"/><target ref="id98"/><label kind="guard" x="613" y="17">globalDoesContain == 1</label><label kind="assignment" x="613" y="34">dummy_state_io_input_link_$_fd_$ = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = maxTimers,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label></transition><transition><source ref="id98"/><target ref="id97"/><label kind="guard" x="-112" y="380">globalDoesContain == -1</label><label kind="assignment" x="-112" y="414">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_dummy_state_io_input_link,
globalAttribute = flightdata,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0</label><nail x="218" y="400"/><nail x="-152" y="400"/></transition><transition><source ref="id98"/><target ref="id99"/><label kind="guard" x="613" y="217">globalDoesContain == 1</label><label kind="assignment" x="613" y="234">dummy_state_maxTimers_$_mT_$ = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
globalValue = nilAnything,
lookAheadIndex = 2,
globalDoesContain = 0</label></transition><transition><source ref="id99"/><target ref="id98"/><label kind="guard" x="-112" y="580">globalDoesContain == -1</label><label kind="assignment" x="-112" y="614">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = maxTimers,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label><nail x="218" y="600"/><nail x="-152" y="600"/></transition><transition><source ref="id99"/><target ref="id100"/><label kind="guard" x="613" y="417">globalDoesContain == 1</label><label kind="assignment" x="613" y="434">dummy_state_currentTimers_$_cT_$ = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = name,
globalValue = droneFlight,
lookAheadIndex = 3,
globalDoesContain = 0</label></transition><transition><source ref="id100"/><target ref="id99"/><label kind="guard" x="-112" y="780">globalDoesContain == -1</label><label kind="assignment" x="-112" y="814">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
globalValue = nilAnything,
lookAheadIndex = 2,
globalDoesContain = 0</label><nail x="218" y="800"/><nail x="-152" y="800"/></transition><transition><source ref="id100"/><target ref="id101"/><label kind="guard" x="613" y="617">globalDoesContain == 1</label><label kind="assignment" x="613" y="634">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = io,
globalValue = nilAnything,
lookAheadIndex = 4,
globalDoesContain = 0</label></transition><transition><source ref="id101"/><target ref="id99"/><label kind="guard" x="-112" y="980">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1014">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
globalValue = nilAnything,
lookAheadIndex = 2,
globalDoesContain = 0</label><nail x="218" y="1000"/><nail x="-152" y="1000"/></transition><transition><source ref="id101"/><target ref="id102"/><label kind="guard" x="613" y="817">globalDoesContain == 1</label><label kind="assignment" x="613" y="834">dummy_state_io = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalValue = nilAnything,
lookAheadIndex = 5,
globalDoesContain = 0</label></transition><transition><source ref="id102"/><target ref="id101"/><label kind="guard" x="-112" y="1180">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1214">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = io,
globalValue = nilAnything,
lookAheadIndex = 4,
globalDoesContain = 0</label><nail x="218" y="1200"/><nail x="-152" y="1200"/></transition><transition><source ref="id102"/><target ref="id103"/><label kind="guard" x="613" y="1017">globalDoesContain == 1</label><label kind="assignment" x="613" y="1034">dummy_dummy_state_io_input_link = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = willBeInPopulatedArea,
globalValue = yes,
lookAheadIndex = 6,
globalDoesContain = 0</label></transition><transition><source ref="id103"/><target ref="id102"/><label kind="guard" x="-112" y="1380">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1414">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalValue = nilAnything,
lookAheadIndex = 5,
globalDoesContain = 0</label><nail x="218" y="1400"/><nail x="-152" y="1400"/></transition><transition><source ref="id103"/><target ref="id104"/><label kind="guard" x="613" y="1217">globalDoesContain == 1</label><label kind="assignment" x="613" y="1234">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = takeOver,
globalValue = yes,
lookAheadIndex = 7,
globalDoesContain = 0</label></transition><transition><source ref="id104"/><target ref="id102"/><label kind="guard" x="-112" y="1580">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1614">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalValue = nilAnything,
lookAheadIndex = 5,
globalDoesContain = 0</label><nail x="218" y="1600"/><nail x="-152" y="1600"/></transition><transition><source ref="id104"/><target ref="id105"/><label kind="guard" x="613" y="1417">globalDoesContain == 1</label><label kind="assignment" x="613" y="1434">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = 0,
globalAttribute = 0,
globalValue = 0,
globalDoesContain = 0,
checkProductionsContain()</label></transition><transition><source ref="id105"/><target ref="id102"/><label kind="guard" x="-112" y="1780">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1814">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalValue = nilAnything,
lookAheadIndex = 5,
globalDoesContain = 0</label><nail x="218" y="1800"/><nail x="-152" y="1800"/></transition><transition><source ref="id105"/><target ref="id106"/><label kind="guard" x="736" y="1783">globalDoesContain == 1</label><label kind="assignment" x="736" y="1800">removeStackCondition(),
addToStackAction(6),
productionFired = true,
lookAheadArray = lookAheadDefault</label><nail x="711" y="1800"/><nail x="958" y="1800"/></transition><transition><source ref="id106"/><target ref="id80"/><label kind="synchronisation" x="588" y="-127">Halt?</label><nail x="958" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id106"/><target ref="id107"/><label kind="guard" x="978" y="-34">stackConditionIndex == -1 &amp;&amp;
stackAction[stackActionIndex] == 6</label><label kind="assignment" x="978" y="8">valueFunction = remove,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
globalValue = dummy_state_currentTimers_$_cT_$,
addOperator = true</label></transition><transition><source ref="id107"/><target ref="id108"/><label kind="guard" x="1353" y="17">!addOperator</label><label kind="assignment" x="1353" y="34">valueFunction = remove,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = maxTimers,
globalValue = dummy_state_maxTimers_$_mT_$,
addOperator = true</label></transition><transition><source ref="id108"/><target ref="id109"/><label kind="guard" x="1353" y="217">!addOperator</label><label kind="assignment" x="1353" y="234">valueFunction = remove,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = willBeInPopulatedArea,
globalValue = yes,
addOperator = true</label></transition><transition><source ref="id109"/><target ref="id110"/><label kind="guard" x="1353" y="417">!addOperator</label><label kind="assignment" x="1353" y="434">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = sentCommand,
globalValue = reverse,
addOperator = true</label></transition><transition><source ref="id110"/><target ref="id80"/><label kind="guard" x="1353" y="583">!addOperator</label><label kind="assignment" x="1353" y="600">addOperator = false,
removeStackAction(),
fillNextProduction()</label><nail x="1698" y="600"/><nail x="1698" y="-110"/><nail x="-152" y="-110"/></transition></template><template><name>drone_apply_returnToBase_outOfTime</name><declaration>int dummy_state_maxTimers_$_mT_$;
int dummy_state_currentTimers_$_cT_$;
const int NUMBER_OF_PRODUCTIONS = 1;

typedef struct {
	int savedTempAndFunction[2];
} Production;

Production productions[NUMBER_OF_PRODUCTIONS];
int productionIndex = 0;
int productionIndexTemp;


void fillNextProduction() {
	productions[productionIndex].savedTempAndFunction[0] = dummy_state_maxTimers_$_mT_$;
	productions[productionIndex].savedTempAndFunction[1] = dummy_state_currentTimers_$_cT_$;
	productionIndex++;
}

void checkProductionsContain() {
	bool containsProduction = false;
	int i;
	for (i = 0; i &lt; productionIndex; i++) {
		if (productions[i].savedTempAndFunction[0] == dummy_state_maxTimers_$_mT_$ &amp;&amp;
			productions[i].savedTempAndFunction[1] == dummy_state_currentTimers_$_cT_$) {
				containsProduction = true;
				i = NUMBER_OF_PRODUCTIONS;
		}
	}
	if (containsProduction) {
		globalDoesContain = -1;
	} else {
		globalDoesContain = 1;
	}
}

</declaration><location id="id111" x="-152" y="0"><name x="-200" y="-32">Start</name><committed/></location><location id="id112" x="-522" y="0"><name x="-702" y="-49">Retract_Conditions</name><committed/></location><location id="id113" x="-892" y="0"><committed/></location><location id="id114" x="-1262" y="0"><name x="-1452" y="-49">Retract_Assignments</name><committed/></location><location id="id115" x="-892" y="319"><committed/></location><location id="id116" x="-892" y="519"><committed/></location><location id="id117" x="-892" y="719"><committed/></location><location id="id118" x="-892" y="919"><committed/></location><location id="id119" x="-1632" y="0"><committed/></location><location id="id120" x="-1632" y="319"><committed/></location><location id="id121" x="-1632" y="519"><committed/></location><location id="id122" x="-1632" y="719"><committed/></location><location id="id123" x="-1632" y="919"><committed/></location><location id="id124" x="218" y="0"><name x="128" y="-32">Run_Guard</name><committed/></location><location id="id125" x="588" y="0"><committed/></location><location id="id126" x="588" y="200"><committed/></location><location id="id127" x="588" y="400"><committed/></location><location id="id128" x="588" y="600"><committed/></location><location id="id129" x="588" y="800"><committed/></location><location id="id130" x="588" y="1000"><committed/></location><location id="id131" x="958" y="0"><name x="818" y="-32">Run_Assignment</name><committed/></location><location id="id132" x="1328" y="0"><committed/></location><location id="id133" x="1328" y="200"><committed/></location><location id="id134" x="1328" y="400"><committed/></location><location id="id135" x="1328" y="600"><committed/></location><init ref="id111"/><transition><source ref="id111"/><target ref="id112"/><label kind="guard" x="-502" y="-17">isRetracting</label><label kind="synchronisation" x="-502" y="-34">Run_Rule?</label><label kind="assignment" x="-502" y="8">addToStackRetract(7),
productionIndexTemp = 0</label></transition><transition><source ref="id112"/><target ref="id111"/><label kind="guard" x="-714" y="-178">stackRetract[stackRetractIndex] == 7 &amp;&amp;
productionIndexTemp == productionIndex</label><label kind="assignment" x="-714" y="-144">productionIndexTemp = 0,
removeStackRetract()</label><nail x="-717" y="0"/><nail x="-717" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id112"/><target ref="id113"/><label kind="guard" x="-872" y="-34">productionIndexTemp != productionIndex &amp;&amp;
stackRetract[stackRetractIndex] == 7</label><label kind="assignment" x="-872" y="8">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[0],
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = maxTimers,
globalDoesContain = 0</label></transition><transition><source ref="id113"/><target ref="id114"/><label kind="guard" x="-1084" y="-17">globalDoesContain == -1</label></transition><transition><source ref="id113"/><target ref="id115"/><label kind="guard" x="-867" y="136">globalDoesContain == 1</label><label kind="assignment" x="-867" y="153">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[1],
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
globalDoesContain = 0</label></transition><transition><source ref="id115"/><target ref="id114"/><label kind="guard" x="-1084" y="302">globalDoesContain == -1</label><nail x="-1262" y="319"/></transition><transition><source ref="id115"/><target ref="id116"/><label kind="guard" x="-867" y="336">globalDoesContain == 1</label><label kind="assignment" x="-867" y="353">valueFunction = isGreaterThanOrEqualTo,
globalValue = dummy_state_maxTimers_$_mT_$,
attributeFunction = 0,
globalIdentifier = dummy_state_currentTimers_$_cT_$,
globalAttribute = extraRestriction,
globalDoesContain = 0</label></transition><transition><source ref="id116"/><target ref="id114"/><label kind="guard" x="-1084" y="502">globalDoesContain == -1</label><nail x="-1262" y="519"/></transition><transition><source ref="id116"/><target ref="id117"/><label kind="guard" x="-867" y="536">globalDoesContain == 1</label><label kind="assignment" x="-867" y="553">valueFunction = 0,
globalValue = droneFlight,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = name,
globalDoesContain = 0</label></transition><transition><source ref="id117"/><target ref="id114"/><label kind="guard" x="-1084" y="702">globalDoesContain == -1</label><nail x="-1262" y="719"/></transition><transition><source ref="id117"/><target ref="id118"/><label kind="guard" x="-867" y="736">globalDoesContain == 1</label><label kind="assignment" x="-867" y="753">valueFunction = 0,
globalValue = yes,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = startNewTimer,
globalDoesContain = 0</label></transition><transition><source ref="id118"/><target ref="id114"/><label kind="guard" x="-1084" y="902">globalDoesContain == -1</label><nail x="-1262" y="919"/></transition><transition><source ref="id118"/><target ref="id112"/><label kind="guard" x="-1234" y="775">globalDoesContain == 1</label><label kind="assignment" x="-1234" y="792">productionIndexTemp++</label><nail x="-1237" y="919"/><nail x="-1237" y="-110"/><nail x="-522" y="-110"/></transition><transition><source ref="id114"/><target ref="id119"/><label kind="guard" x="-1612" y="-34">productionIndexTemp != productionIndex &amp;&amp;
stackRetract[stackRetractIndex] == 7</label><label kind="assignment" x="-1612" y="8">valueFunction = remove,
globalValue = dummy_state_currentTimers_$_cT_$,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
addOperator = true</label></transition><transition><source ref="id119"/><target ref="id120"/><label kind="guard" x="-1607" y="136">!addOperator</label><label kind="assignment" x="-1607" y="153">valueFunction = remove,
globalValue = dummy_state_maxTimers_$_mT_$,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = maxTimers,
addOperator = true</label></transition><transition><source ref="id120"/><target ref="id121"/><label kind="guard" x="-1607" y="336">!addOperator</label><label kind="assignment" x="-1607" y="353">valueFunction = remove,
globalValue = yes,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = startNewTimer,
addOperator = true</label></transition><transition><source ref="id121"/><target ref="id122"/><label kind="guard" x="-1607" y="536">!addOperator</label><label kind="assignment" x="-1607" y="553">valueFunction = remove,
globalValue = reverse,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = sentCommand,
addOperator = true</label></transition><transition><source ref="id122"/><target ref="id123"/><label kind="guard" x="-1607" y="736">!addOperator</label><label kind="assignment" x="-1607" y="753">removeOperator = true,
globalIndex = 0,
currentNumAttributes =
getNumAttributes(nestedCheckArray[0])</label></transition><transition><source ref="id123"/><target ref="id112"/><label kind="guard" x="-1824" y="758">!removeOperator &amp;&amp;
currentNumAttributes == 0</label><label kind="assignment" x="-1824" y="792">productionIndex--</label><nail x="-1827" y="919"/><nail x="-1827" y="-110"/><nail x="-522" y="-110"/></transition><transition><source ref="id111"/><target ref="id124"/><label kind="guard" x="-132" y="-34">!isRetracting &amp;&amp;
productionIndex != NUMBER_OF_PRODUCTIONS</label><label kind="synchronisation" x="-132" y="-51">Run_Rule?</label><label kind="assignment" x="-132" y="8">addToStackCondition(7)</label></transition><transition><source ref="id124"/><target ref="id111"/><label kind="synchronisation" x="-152" y="-127">Halt?</label><nail x="218" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id124"/><target ref="id125"/><label kind="guard" x="238" y="-34">stackCondition[stackConditionIndex] == 7 &amp;&amp;
!addOperator</label><label kind="assignment" x="238" y="8">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = maxTimers,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0,
globalIndex = 0</label></transition><transition><source ref="id125"/><target ref="id111"/><label kind="guard" x="-132" y="180">globalDoesContain == -1</label><label kind="assignment" x="-132" y="214">lookAheadArray = lookAheadDefault,
removeStackCondition()</label><nail x="218" y="200"/><nail x="-152" y="200"/></transition><transition><source ref="id125"/><target ref="id126"/><label kind="guard" x="613" y="17">globalDoesContain == 1</label><label kind="assignment" x="613" y="34">dummy_state_maxTimers_$_mT_$ = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label></transition><transition><source ref="id126"/><target ref="id125"/><label kind="guard" x="-112" y="380">globalDoesContain == -1</label><label kind="assignment" x="-112" y="414">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = maxTimers,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0</label><nail x="218" y="400"/><nail x="-152" y="400"/></transition><transition><source ref="id126"/><target ref="id127"/><label kind="guard" x="613" y="217">globalDoesContain == 1</label><label kind="assignment" x="613" y="234">dummy_state_currentTimers_$_cT_$ = globalValue,
valueFunction = isGreaterThanOrEqualTo,
attributeFunction = 0,
globalIdentifier = dummy_state_currentTimers_$_cT_$,
globalAttribute = extraRestriction,
globalValue = dummy_state_maxTimers_$_mT_$,
lookAheadIndex = 2,
globalDoesContain = 0</label></transition><transition><source ref="id127"/><target ref="id126"/><label kind="guard" x="-112" y="580">globalDoesContain == -1</label><label kind="assignment" x="-112" y="614">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label><nail x="218" y="600"/><nail x="-152" y="600"/></transition><transition><source ref="id127"/><target ref="id128"/><label kind="guard" x="613" y="417">globalDoesContain == 1</label><label kind="assignment" x="613" y="434">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = name,
globalValue = droneFlight,
lookAheadIndex = 3,
globalDoesContain = 0</label></transition><transition><source ref="id128"/><target ref="id126"/><label kind="guard" x="-112" y="780">globalDoesContain == -1</label><label kind="assignment" x="-112" y="814">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label><nail x="218" y="800"/><nail x="-152" y="800"/></transition><transition><source ref="id128"/><target ref="id129"/><label kind="guard" x="613" y="617">globalDoesContain == 1</label><label kind="assignment" x="613" y="634">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = startNewTimer,
globalValue = yes,
lookAheadIndex = 4,
globalDoesContain = 0</label></transition><transition><source ref="id129"/><target ref="id126"/><label kind="guard" x="-112" y="980">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1014">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label><nail x="218" y="1000"/><nail x="-152" y="1000"/></transition><transition><source ref="id129"/><target ref="id130"/><label kind="guard" x="613" y="817">globalDoesContain == 1</label><label kind="assignment" x="613" y="834">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = 0,
globalAttribute = 0,
globalValue = 0,
globalDoesContain = 0,
checkProductionsContain()</label></transition><transition><source ref="id130"/><target ref="id126"/><label kind="guard" x="-112" y="1180">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1214">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label><nail x="218" y="1200"/><nail x="-152" y="1200"/></transition><transition><source ref="id130"/><target ref="id131"/><label kind="guard" x="736" y="1183">globalDoesContain == 1</label><label kind="assignment" x="736" y="1200">removeStackCondition(),
addToStackAction(7),
productionFired = true,
lookAheadArray = lookAheadDefault</label><nail x="711" y="1200"/><nail x="958" y="1200"/></transition><transition><source ref="id131"/><target ref="id111"/><label kind="synchronisation" x="588" y="-127">Halt?</label><nail x="958" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id131"/><target ref="id132"/><label kind="guard" x="978" y="-34">stackConditionIndex == -1 &amp;&amp;
stackAction[stackActionIndex] == 7</label><label kind="assignment" x="978" y="8">valueFunction = remove,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
globalValue = dummy_state_currentTimers_$_cT_$,
addOperator = true</label></transition><transition><source ref="id132"/><target ref="id133"/><label kind="guard" x="1353" y="17">!addOperator</label><label kind="assignment" x="1353" y="34">valueFunction = remove,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = maxTimers,
globalValue = dummy_state_maxTimers_$_mT_$,
addOperator = true</label></transition><transition><source ref="id133"/><target ref="id134"/><label kind="guard" x="1353" y="217">!addOperator</label><label kind="assignment" x="1353" y="234">valueFunction = remove,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = startNewTimer,
globalValue = yes,
addOperator = true</label></transition><transition><source ref="id134"/><target ref="id135"/><label kind="guard" x="1353" y="417">!addOperator</label><label kind="assignment" x="1353" y="434">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = sentCommand,
globalValue = reverse,
addOperator = true</label></transition><transition><source ref="id135"/><target ref="id111"/><label kind="guard" x="1353" y="583">!addOperator</label><label kind="assignment" x="1353" y="600">addOperator = false,
removeStackAction(),
fillNextProduction()</label><nail x="1698" y="600"/><nail x="1698" y="-110"/><nail x="-152" y="-110"/></transition></template><template><name>drone_apply_startTimer</name><declaration>int dummy_state_currentTime_$_current_Time_$;
int dummy_state_io_input_link_$_fd_$;
int dummy_dummy_state_io_input_link;
int dummy_state_io;
const int NUMBER_OF_PRODUCTIONS = 1;

typedef struct {
	int savedTempAndFunction[4];
} Production;

Production productions[NUMBER_OF_PRODUCTIONS];
int productionIndex = 0;
int productionIndexTemp;


void fillNextProduction() {
	productions[productionIndex].savedTempAndFunction[0] = dummy_state_currentTime_$_current_Time_$;
	productions[productionIndex].savedTempAndFunction[1] = dummy_state_io_input_link_$_fd_$;
	productions[productionIndex].savedTempAndFunction[2] = dummy_dummy_state_io_input_link;
	productions[productionIndex].savedTempAndFunction[3] = dummy_state_io;
	productionIndex++;
}

void checkProductionsContain() {
	bool containsProduction = false;
	int i;
	for (i = 0; i &lt; productionIndex; i++) {
		if (productions[i].savedTempAndFunction[1] == dummy_state_io_input_link_$_fd_$ &amp;&amp;
			productions[i].savedTempAndFunction[2] == dummy_dummy_state_io_input_link &amp;&amp;
			productions[i].savedTempAndFunction[3] == dummy_state_io &amp;&amp;
			productions[i].savedTempAndFunction[0] == dummy_state_currentTime_$_current_Time_$) {
				containsProduction = true;
				i = NUMBER_OF_PRODUCTIONS;
		}
	}
	if (containsProduction) {
		globalDoesContain = -1;
	} else {
		globalDoesContain = 1;
	}
}

</declaration><location id="id136" x="-152" y="0"><name x="-200" y="-32">Start</name><committed/></location><location id="id137" x="-522" y="0"><name x="-702" y="-49">Retract_Conditions</name><committed/></location><location id="id138" x="-892" y="0"><committed/></location><location id="id139" x="-1262" y="0"><name x="-1452" y="-49">Retract_Assignments</name><committed/></location><location id="id140" x="-892" y="319"><committed/></location><location id="id141" x="-892" y="519"><committed/></location><location id="id142" x="-892" y="719"><committed/></location><location id="id143" x="-892" y="919"><committed/></location><location id="id144" x="-892" y="1119"><committed/></location><location id="id145" x="-892" y="1319"><committed/></location><location id="id146" x="-1632" y="0"><committed/></location><location id="id147" x="-1632" y="319"><committed/></location><location id="id148" x="-1632" y="519"><committed/></location><location id="id149" x="-1632" y="719"><committed/></location><location id="id150" x="218" y="0"><name x="128" y="-32">Run_Guard</name><committed/></location><location id="id151" x="588" y="0"><committed/></location><location id="id152" x="588" y="200"><committed/></location><location id="id153" x="588" y="400"><committed/></location><location id="id154" x="588" y="600"><committed/></location><location id="id155" x="588" y="800"><committed/></location><location id="id156" x="588" y="1000"><committed/></location><location id="id157" x="588" y="1200"><committed/></location><location id="id158" x="588" y="1400"><committed/></location><location id="id159" x="958" y="0"><name x="818" y="-32">Run_Assignment</name><committed/></location><location id="id160" x="1328" y="0"><committed/></location><location id="id161" x="1328" y="200"><committed/></location><location id="id162" x="1328" y="400"><committed/></location><init ref="id136"/><transition><source ref="id136"/><target ref="id137"/><label kind="guard" x="-502" y="-17">isRetracting</label><label kind="synchronisation" x="-502" y="-34">Run_Rule?</label><label kind="assignment" x="-502" y="8">addToStackRetract(8),
productionIndexTemp = 0</label></transition><transition><source ref="id137"/><target ref="id136"/><label kind="guard" x="-714" y="-178">stackRetract[stackRetractIndex] == 8 &amp;&amp;
productionIndexTemp == productionIndex</label><label kind="assignment" x="-714" y="-144">productionIndexTemp = 0,
removeStackRetract()</label><nail x="-717" y="0"/><nail x="-717" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id137"/><target ref="id138"/><label kind="guard" x="-872" y="-34">productionIndexTemp != productionIndex &amp;&amp;
stackRetract[stackRetractIndex] == 8</label><label kind="assignment" x="-872" y="8">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[1],
attributeFunction = 0,
globalIdentifier = dummy_dummy_state_io_input_link,
globalAttribute = flightdata,
globalDoesContain = 0</label></transition><transition><source ref="id138"/><target ref="id139"/><label kind="guard" x="-1084" y="-17">globalDoesContain == -1</label></transition><transition><source ref="id138"/><target ref="id140"/><label kind="guard" x="-867" y="136">globalDoesContain == 1</label><label kind="assignment" x="-867" y="153">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[0],
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = currentTime,
globalDoesContain = 0</label></transition><transition><source ref="id140"/><target ref="id139"/><label kind="guard" x="-1084" y="302">globalDoesContain == -1</label><nail x="-1262" y="319"/></transition><transition><source ref="id140"/><target ref="id141"/><label kind="guard" x="-867" y="336">globalDoesContain == 1</label><label kind="assignment" x="-867" y="353">valueFunction = 0,
globalValue = droneFlight,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = name,
globalDoesContain = 0</label></transition><transition><source ref="id141"/><target ref="id139"/><label kind="guard" x="-1084" y="502">globalDoesContain == -1</label><nail x="-1262" y="519"/></transition><transition><source ref="id141"/><target ref="id142"/><label kind="guard" x="-867" y="536">globalDoesContain == 1</label><label kind="assignment" x="-867" y="553">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[3],
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = io,
globalDoesContain = 0</label></transition><transition><source ref="id142"/><target ref="id139"/><label kind="guard" x="-1084" y="702">globalDoesContain == -1</label><nail x="-1262" y="719"/></transition><transition><source ref="id142"/><target ref="id143"/><label kind="guard" x="-867" y="736">globalDoesContain == 1</label><label kind="assignment" x="-867" y="753">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[2],
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalDoesContain = 0</label></transition><transition><source ref="id143"/><target ref="id139"/><label kind="guard" x="-1084" y="902">globalDoesContain == -1</label><nail x="-1262" y="919"/></transition><transition><source ref="id143"/><target ref="id144"/><label kind="guard" x="-867" y="936">globalDoesContain == 1</label><label kind="assignment" x="-867" y="953">valueFunction = 0,
globalValue = no,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = willBeInPopulatedArea,
globalDoesContain = 0</label></transition><transition><source ref="id144"/><target ref="id139"/><label kind="guard" x="-1084" y="1102">globalDoesContain == -1</label><nail x="-1262" y="1119"/></transition><transition><source ref="id144"/><target ref="id145"/><label kind="guard" x="-867" y="1136">globalDoesContain == 1</label><label kind="assignment" x="-867" y="1153">valueFunction = 0,
globalValue = yes,
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = takeOver,
globalDoesContain = 0</label></transition><transition><source ref="id145"/><target ref="id139"/><label kind="guard" x="-1084" y="1302">globalDoesContain == -1</label><nail x="-1262" y="1319"/></transition><transition><source ref="id145"/><target ref="id137"/><label kind="guard" x="-1234" y="1175">globalDoesContain == 1</label><label kind="assignment" x="-1234" y="1192">productionIndexTemp++</label><nail x="-1237" y="1319"/><nail x="-1237" y="-110"/><nail x="-522" y="-110"/></transition><transition><source ref="id139"/><target ref="id146"/><label kind="guard" x="-1612" y="-34">productionIndexTemp != productionIndex &amp;&amp;
stackRetract[stackRetractIndex] == 8</label><label kind="assignment" x="-1612" y="8">valueFunction = remove,
globalValue = no,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = willBeInPopulatedArea,
addOperator = true</label></transition><transition><source ref="id146"/><target ref="id147"/><label kind="guard" x="-1607" y="136">!addOperator</label><label kind="assignment" x="-1607" y="153">valueFunction = remove,
globalValue = state_timer_1,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = timer,
addOperator = true</label></transition><transition><source ref="id147"/><target ref="id148"/><label kind="guard" x="-1607" y="336">!addOperator</label><label kind="assignment" x="-1607" y="353">valueFunction = remove,
globalValue = dummy_state_currentTime_$_current_Time_$,
attributeFunction = 60,
globalIdentifier = state_timer_1,
globalAttribute = targetTime,
addOperator = true</label></transition><transition><source ref="id148"/><target ref="id149"/><label kind="guard" x="-1607" y="536">!addOperator</label><label kind="assignment" x="-1607" y="553">removeOperator = true,
globalIndex = 0,
currentNumAttributes =
getNumAttributes(nestedCheckArray[0])</label></transition><transition><source ref="id149"/><target ref="id137"/><label kind="guard" x="-1824" y="558">!removeOperator &amp;&amp;
currentNumAttributes == 0</label><label kind="assignment" x="-1824" y="592">productionIndex--</label><nail x="-1827" y="719"/><nail x="-1827" y="-110"/><nail x="-522" y="-110"/></transition><transition><source ref="id136"/><target ref="id150"/><label kind="guard" x="-132" y="-34">!isRetracting &amp;&amp;
productionIndex != NUMBER_OF_PRODUCTIONS</label><label kind="synchronisation" x="-132" y="-51">Run_Rule?</label><label kind="assignment" x="-132" y="8">addToStackCondition(8)</label></transition><transition><source ref="id150"/><target ref="id136"/><label kind="synchronisation" x="-152" y="-127">Halt?</label><nail x="218" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id150"/><target ref="id151"/><label kind="guard" x="238" y="-34">stackCondition[stackConditionIndex] == 8 &amp;&amp;
!addOperator</label><label kind="assignment" x="238" y="8">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_dummy_state_io_input_link,
globalAttribute = flightdata,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0,
globalIndex = 0</label></transition><transition><source ref="id151"/><target ref="id136"/><label kind="guard" x="-132" y="180">globalDoesContain == -1</label><label kind="assignment" x="-132" y="214">lookAheadArray = lookAheadDefault,
removeStackCondition()</label><nail x="218" y="200"/><nail x="-152" y="200"/></transition><transition><source ref="id151"/><target ref="id152"/><label kind="guard" x="613" y="17">globalDoesContain == 1</label><label kind="assignment" x="613" y="34">dummy_state_io_input_link_$_fd_$ = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = currentTime,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label></transition><transition><source ref="id152"/><target ref="id151"/><label kind="guard" x="-112" y="380">globalDoesContain == -1</label><label kind="assignment" x="-112" y="414">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_dummy_state_io_input_link,
globalAttribute = flightdata,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0</label><nail x="218" y="400"/><nail x="-152" y="400"/></transition><transition><source ref="id152"/><target ref="id153"/><label kind="guard" x="613" y="217">globalDoesContain == 1</label><label kind="assignment" x="613" y="234">dummy_state_currentTime_$_current_Time_$ = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = name,
globalValue = droneFlight,
lookAheadIndex = 2,
globalDoesContain = 0</label></transition><transition><source ref="id153"/><target ref="id152"/><label kind="guard" x="-112" y="580">globalDoesContain == -1</label><label kind="assignment" x="-112" y="614">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = currentTime,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label><nail x="218" y="600"/><nail x="-152" y="600"/></transition><transition><source ref="id153"/><target ref="id154"/><label kind="guard" x="613" y="417">globalDoesContain == 1</label><label kind="assignment" x="613" y="434">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = io,
globalValue = nilAnything,
lookAheadIndex = 3,
globalDoesContain = 0</label></transition><transition><source ref="id154"/><target ref="id152"/><label kind="guard" x="-112" y="780">globalDoesContain == -1</label><label kind="assignment" x="-112" y="814">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = currentTime,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label><nail x="218" y="800"/><nail x="-152" y="800"/></transition><transition><source ref="id154"/><target ref="id155"/><label kind="guard" x="613" y="617">globalDoesContain == 1</label><label kind="assignment" x="613" y="634">dummy_state_io = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalValue = nilAnything,
lookAheadIndex = 4,
globalDoesContain = 0</label></transition><transition><source ref="id155"/><target ref="id154"/><label kind="guard" x="-112" y="980">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1014">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = io,
globalValue = nilAnything,
lookAheadIndex = 3,
globalDoesContain = 0</label><nail x="218" y="1000"/><nail x="-152" y="1000"/></transition><transition><source ref="id155"/><target ref="id156"/><label kind="guard" x="613" y="817">globalDoesContain == 1</label><label kind="assignment" x="613" y="834">dummy_dummy_state_io_input_link = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = willBeInPopulatedArea,
globalValue = no,
lookAheadIndex = 5,
globalDoesContain = 0</label></transition><transition><source ref="id156"/><target ref="id155"/><label kind="guard" x="-112" y="1180">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1214">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalValue = nilAnything,
lookAheadIndex = 4,
globalDoesContain = 0</label><nail x="218" y="1200"/><nail x="-152" y="1200"/></transition><transition><source ref="id156"/><target ref="id157"/><label kind="guard" x="613" y="1017">globalDoesContain == 1</label><label kind="assignment" x="613" y="1034">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = takeOver,
globalValue = yes,
lookAheadIndex = 6,
globalDoesContain = 0</label></transition><transition><source ref="id157"/><target ref="id155"/><label kind="guard" x="-112" y="1380">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1414">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalValue = nilAnything,
lookAheadIndex = 4,
globalDoesContain = 0</label><nail x="218" y="1400"/><nail x="-152" y="1400"/></transition><transition><source ref="id157"/><target ref="id158"/><label kind="guard" x="613" y="1217">globalDoesContain == 1</label><label kind="assignment" x="613" y="1234">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = 0,
globalAttribute = 0,
globalValue = 0,
globalDoesContain = 0,
checkProductionsContain()</label></transition><transition><source ref="id158"/><target ref="id155"/><label kind="guard" x="-112" y="1580">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1614">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalValue = nilAnything,
lookAheadIndex = 4,
globalDoesContain = 0</label><nail x="218" y="1600"/><nail x="-152" y="1600"/></transition><transition><source ref="id158"/><target ref="id159"/><label kind="guard" x="736" y="1583">globalDoesContain == 1</label><label kind="assignment" x="736" y="1600">removeStackCondition(),
addToStackAction(8),
productionFired = true,
lookAheadArray = lookAheadDefault</label><nail x="711" y="1600"/><nail x="958" y="1600"/></transition><transition><source ref="id159"/><target ref="id136"/><label kind="synchronisation" x="588" y="-127">Halt?</label><nail x="958" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id159"/><target ref="id160"/><label kind="guard" x="978" y="-34">stackConditionIndex == -1 &amp;&amp;
stackAction[stackActionIndex] == 8</label><label kind="assignment" x="978" y="8">valueFunction = remove,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = willBeInPopulatedArea,
globalValue = no,
addOperator = true</label></transition><transition><source ref="id160"/><target ref="id161"/><label kind="guard" x="1353" y="17">!addOperator</label><label kind="assignment" x="1353" y="34">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = timer,
globalValue = state_timer_1,
addOperator = true</label></transition><transition><source ref="id161"/><target ref="id162"/><label kind="guard" x="1353" y="217">!addOperator</label><label kind="assignment" x="1353" y="234">valueFunction = addFunction,
attributeFunction = 60,
globalIdentifier = state_timer_1,
globalAttribute = targetTime,
globalValue = dummy_state_currentTime_$_current_Time_$,
addOperator = true</label></transition><transition><source ref="id162"/><target ref="id136"/><label kind="guard" x="1353" y="383">!addOperator</label><label kind="assignment" x="1353" y="400">addOperator = false,
removeStackAction(),
fillNextProduction()</label><nail x="1698" y="400"/><nail x="1698" y="-110"/><nail x="-152" y="-110"/></transition></template><template><name>drone_apply_timer_done_execute</name><declaration>int dummy_state_timer_targetTime_$_target_time_$;
int dummy_state_currentTime_$_time_$;
int dummy_state_timer_$_t_$;
int dummy_state_io_input_link_$_fd_$;
int dummy_dummy_state_io_input_link;
int dummy_state_io;
const int NUMBER_OF_PRODUCTIONS = 1;

typedef struct {
	int savedTempAndFunction[6];
} Production;

Production productions[NUMBER_OF_PRODUCTIONS];
int productionIndex = 0;
int productionIndexTemp;


void fillNextProduction() {
	productions[productionIndex].savedTempAndFunction[0] = dummy_state_timer_targetTime_$_target_time_$;
	productions[productionIndex].savedTempAndFunction[1] = dummy_state_currentTime_$_time_$;
	productions[productionIndex].savedTempAndFunction[2] = dummy_state_timer_$_t_$;
	productions[productionIndex].savedTempAndFunction[3] = dummy_state_io_input_link_$_fd_$;
	productions[productionIndex].savedTempAndFunction[4] = dummy_dummy_state_io_input_link;
	productions[productionIndex].savedTempAndFunction[5] = dummy_state_io;
	productionIndex++;
}

void checkProductionsContain() {
	bool containsProduction = false;
	int i;
	for (i = 0; i &lt; productionIndex; i++) {
		if (productions[i].savedTempAndFunction[2] == dummy_state_timer_$_t_$ &amp;&amp;
			productions[i].savedTempAndFunction[0] == dummy_state_timer_targetTime_$_target_time_$ &amp;&amp;
			productions[i].savedTempAndFunction[3] == dummy_state_io_input_link_$_fd_$ &amp;&amp;
			productions[i].savedTempAndFunction[4] == dummy_dummy_state_io_input_link &amp;&amp;
			productions[i].savedTempAndFunction[5] == dummy_state_io &amp;&amp;
			productions[i].savedTempAndFunction[1] == dummy_state_currentTime_$_time_$) {
				containsProduction = true;
				i = NUMBER_OF_PRODUCTIONS;
		}
	}
	if (containsProduction) {
		globalDoesContain = -1;
	} else {
		globalDoesContain = 1;
	}
}

</declaration><location id="id163" x="-152" y="0"><name x="-200" y="-32">Start</name><committed/></location><location id="id164" x="-522" y="0"><name x="-702" y="-49">Retract_Conditions</name><committed/></location><location id="id165" x="-892" y="0"><committed/></location><location id="id166" x="-1262" y="0"><name x="-1452" y="-49">Retract_Assignments</name><committed/></location><location id="id167" x="-892" y="319"><committed/></location><location id="id168" x="-892" y="519"><committed/></location><location id="id169" x="-892" y="719"><committed/></location><location id="id170" x="-892" y="919"><committed/></location><location id="id171" x="-892" y="1119"><committed/></location><location id="id172" x="-892" y="1319"><committed/></location><location id="id173" x="-892" y="1519"><committed/></location><location id="id174" x="-892" y="1719"><committed/></location><location id="id175" x="-1632" y="0"><committed/></location><location id="id176" x="-1632" y="319"><committed/></location><location id="id177" x="-1632" y="519"><committed/></location><location id="id178" x="218" y="0"><name x="128" y="-32">Run_Guard</name><committed/></location><location id="id179" x="588" y="0"><committed/></location><location id="id180" x="588" y="200"><committed/></location><location id="id181" x="588" y="400"><committed/></location><location id="id182" x="588" y="600"><committed/></location><location id="id183" x="588" y="800"><committed/></location><location id="id184" x="588" y="1000"><committed/></location><location id="id185" x="588" y="1200"><committed/></location><location id="id186" x="588" y="1400"><committed/></location><location id="id187" x="588" y="1600"><committed/></location><location id="id188" x="588" y="1800"><committed/></location><location id="id189" x="958" y="0"><name x="818" y="-32">Run_Assignment</name><committed/></location><location id="id190" x="1328" y="0"><committed/></location><location id="id191" x="1328" y="200"><committed/></location><init ref="id163"/><transition><source ref="id163"/><target ref="id164"/><label kind="guard" x="-502" y="-17">isRetracting</label><label kind="synchronisation" x="-502" y="-34">Run_Rule?</label><label kind="assignment" x="-502" y="8">addToStackRetract(9),
productionIndexTemp = 0</label></transition><transition><source ref="id164"/><target ref="id163"/><label kind="guard" x="-714" y="-178">stackRetract[stackRetractIndex] == 9 &amp;&amp;
productionIndexTemp == productionIndex</label><label kind="assignment" x="-714" y="-144">productionIndexTemp = 0,
removeStackRetract()</label><nail x="-717" y="0"/><nail x="-717" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id164"/><target ref="id165"/><label kind="guard" x="-872" y="-34">productionIndexTemp != productionIndex &amp;&amp;
stackRetract[stackRetractIndex] == 9</label><label kind="assignment" x="-872" y="8">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[2],
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = timer,
globalDoesContain = 0</label></transition><transition><source ref="id165"/><target ref="id166"/><label kind="guard" x="-1084" y="-17">globalDoesContain == -1</label></transition><transition><source ref="id165"/><target ref="id167"/><label kind="guard" x="-867" y="136">globalDoesContain == 1</label><label kind="assignment" x="-867" y="153">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[3],
attributeFunction = 0,
globalIdentifier = dummy_dummy_state_io_input_link,
globalAttribute = flightdata,
globalDoesContain = 0</label></transition><transition><source ref="id167"/><target ref="id166"/><label kind="guard" x="-1084" y="302">globalDoesContain == -1</label><nail x="-1262" y="319"/></transition><transition><source ref="id167"/><target ref="id168"/><label kind="guard" x="-867" y="336">globalDoesContain == 1</label><label kind="assignment" x="-867" y="353">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[0],
attributeFunction = 0,
globalIdentifier = dummy_state_timer_$_t_$,
globalAttribute = targetTime,
globalDoesContain = 0</label></transition><transition><source ref="id168"/><target ref="id166"/><label kind="guard" x="-1084" y="502">globalDoesContain == -1</label><nail x="-1262" y="519"/></transition><transition><source ref="id168"/><target ref="id169"/><label kind="guard" x="-867" y="536">globalDoesContain == 1</label><label kind="assignment" x="-867" y="553">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[1],
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = currentTime,
globalDoesContain = 0</label></transition><transition><source ref="id169"/><target ref="id166"/><label kind="guard" x="-1084" y="702">globalDoesContain == -1</label><nail x="-1262" y="719"/></transition><transition><source ref="id169"/><target ref="id170"/><label kind="guard" x="-867" y="736">globalDoesContain == 1</label><label kind="assignment" x="-867" y="753">valueFunction = isGreaterThanOrEqualTo,
globalValue = dummy_state_timer_targetTime_$_target_time_$,
attributeFunction = 0,
globalIdentifier = dummy_state_currentTime_$_time_$,
globalAttribute = extraRestriction,
globalDoesContain = 0</label></transition><transition><source ref="id170"/><target ref="id166"/><label kind="guard" x="-1084" y="902">globalDoesContain == -1</label><nail x="-1262" y="919"/></transition><transition><source ref="id170"/><target ref="id171"/><label kind="guard" x="-867" y="936">globalDoesContain == 1</label><label kind="assignment" x="-867" y="953">valueFunction = 0,
globalValue = droneFlight,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = name,
globalDoesContain = 0</label></transition><transition><source ref="id171"/><target ref="id166"/><label kind="guard" x="-1084" y="1102">globalDoesContain == -1</label><nail x="-1262" y="1119"/></transition><transition><source ref="id171"/><target ref="id172"/><label kind="guard" x="-867" y="1136">globalDoesContain == 1</label><label kind="assignment" x="-867" y="1153">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[5],
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = io,
globalDoesContain = 0</label></transition><transition><source ref="id172"/><target ref="id166"/><label kind="guard" x="-1084" y="1302">globalDoesContain == -1</label><nail x="-1262" y="1319"/></transition><transition><source ref="id172"/><target ref="id173"/><label kind="guard" x="-867" y="1336">globalDoesContain == 1</label><label kind="assignment" x="-867" y="1353">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[4],
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalDoesContain = 0</label></transition><transition><source ref="id173"/><target ref="id166"/><label kind="guard" x="-1084" y="1502">globalDoesContain == -1</label><nail x="-1262" y="1519"/></transition><transition><source ref="id173"/><target ref="id174"/><label kind="guard" x="-867" y="1536">globalDoesContain == 1</label><label kind="assignment" x="-867" y="1553">valueFunction = 0,
globalValue = EMPTY,
attributeFunction = 0,
globalIdentifier = dummy_state_timer_$_t_$,
globalAttribute = done,
globalDoesContain = 0</label></transition><transition><source ref="id174"/><target ref="id166"/><label kind="guard" x="-1084" y="1702">globalDoesContain == -1</label><nail x="-1262" y="1719"/></transition><transition><source ref="id174"/><target ref="id164"/><label kind="guard" x="-1234" y="1575">globalDoesContain == 1</label><label kind="assignment" x="-1234" y="1592">productionIndexTemp++</label><nail x="-1237" y="1719"/><nail x="-1237" y="-110"/><nail x="-522" y="-110"/></transition><transition><source ref="id166"/><target ref="id175"/><label kind="guard" x="-1612" y="-34">productionIndexTemp != productionIndex &amp;&amp;
stackRetract[stackRetractIndex] == 9</label><label kind="assignment" x="-1612" y="8">valueFunction = remove,
globalValue = dummy_state_timer_$_t_$,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = timer,
addOperator = true</label></transition><transition><source ref="id175"/><target ref="id176"/><label kind="guard" x="-1607" y="136">!addOperator</label><label kind="assignment" x="-1607" y="153">valueFunction = remove,
globalValue = yes,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = startNewTimer,
addOperator = true</label></transition><transition><source ref="id176"/><target ref="id177"/><label kind="guard" x="-1607" y="336">!addOperator</label><label kind="assignment" x="-1607" y="353">removeOperator = true,
globalIndex = 0,
currentNumAttributes =
getNumAttributes(nestedCheckArray[0])</label></transition><transition><source ref="id177"/><target ref="id164"/><label kind="guard" x="-1824" y="358">!removeOperator &amp;&amp;
currentNumAttributes == 0</label><label kind="assignment" x="-1824" y="392">productionIndex--</label><nail x="-1827" y="519"/><nail x="-1827" y="-110"/><nail x="-522" y="-110"/></transition><transition><source ref="id163"/><target ref="id178"/><label kind="guard" x="-132" y="-34">!isRetracting &amp;&amp;
productionIndex != NUMBER_OF_PRODUCTIONS</label><label kind="synchronisation" x="-132" y="-51">Run_Rule?</label><label kind="assignment" x="-132" y="8">addToStackCondition(9)</label></transition><transition><source ref="id178"/><target ref="id163"/><label kind="synchronisation" x="-152" y="-127">Halt?</label><nail x="218" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id178"/><target ref="id179"/><label kind="guard" x="238" y="-34">stackCondition[stackConditionIndex] == 9 &amp;&amp;
!addOperator</label><label kind="assignment" x="238" y="8">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = timer,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0,
globalIndex = 0</label></transition><transition><source ref="id179"/><target ref="id163"/><label kind="guard" x="-132" y="180">globalDoesContain == -1</label><label kind="assignment" x="-132" y="214">lookAheadArray = lookAheadDefault,
removeStackCondition()</label><nail x="218" y="200"/><nail x="-152" y="200"/></transition><transition><source ref="id179"/><target ref="id180"/><label kind="guard" x="613" y="17">globalDoesContain == 1</label><label kind="assignment" x="613" y="34">dummy_state_timer_$_t_$ = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_dummy_state_io_input_link,
globalAttribute = flightdata,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label></transition><transition><source ref="id180"/><target ref="id179"/><label kind="guard" x="-112" y="380">globalDoesContain == -1</label><label kind="assignment" x="-112" y="414">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = timer,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0</label><nail x="218" y="400"/><nail x="-152" y="400"/></transition><transition><source ref="id180"/><target ref="id181"/><label kind="guard" x="613" y="217">globalDoesContain == 1</label><label kind="assignment" x="613" y="234">dummy_state_io_input_link_$_fd_$ = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_timer_$_t_$,
globalAttribute = targetTime,
globalValue = nilAnything,
lookAheadIndex = 2,
globalDoesContain = 0</label></transition><transition><source ref="id181"/><target ref="id180"/><label kind="guard" x="-112" y="580">globalDoesContain == -1</label><label kind="assignment" x="-112" y="614">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_dummy_state_io_input_link,
globalAttribute = flightdata,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label><nail x="218" y="600"/><nail x="-152" y="600"/></transition><transition><source ref="id181"/><target ref="id182"/><label kind="guard" x="613" y="417">globalDoesContain == 1</label><label kind="assignment" x="613" y="434">dummy_state_timer_targetTime_$_target_time_$ = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = currentTime,
globalValue = nilAnything,
lookAheadIndex = 3,
globalDoesContain = 0</label></transition><transition><source ref="id182"/><target ref="id181"/><label kind="guard" x="-112" y="780">globalDoesContain == -1</label><label kind="assignment" x="-112" y="814">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_timer_$_t_$,
globalAttribute = targetTime,
globalValue = nilAnything,
lookAheadIndex = 2,
globalDoesContain = 0</label><nail x="218" y="800"/><nail x="-152" y="800"/></transition><transition><source ref="id182"/><target ref="id183"/><label kind="guard" x="613" y="617">globalDoesContain == 1</label><label kind="assignment" x="613" y="634">dummy_state_currentTime_$_time_$ = globalValue,
valueFunction = isGreaterThanOrEqualTo,
attributeFunction = 0,
globalIdentifier = dummy_state_currentTime_$_time_$,
globalAttribute = extraRestriction,
globalValue = dummy_state_timer_targetTime_$_target_time_$,
lookAheadIndex = 4,
globalDoesContain = 0</label></transition><transition><source ref="id183"/><target ref="id182"/><label kind="guard" x="-112" y="980">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1014">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = currentTime,
globalValue = nilAnything,
lookAheadIndex = 3,
globalDoesContain = 0</label><nail x="218" y="1000"/><nail x="-152" y="1000"/></transition><transition><source ref="id183"/><target ref="id184"/><label kind="guard" x="613" y="817">globalDoesContain == 1</label><label kind="assignment" x="613" y="834">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = name,
globalValue = droneFlight,
lookAheadIndex = 5,
globalDoesContain = 0</label></transition><transition><source ref="id184"/><target ref="id182"/><label kind="guard" x="-112" y="1180">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1214">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = currentTime,
globalValue = nilAnything,
lookAheadIndex = 3,
globalDoesContain = 0</label><nail x="218" y="1200"/><nail x="-152" y="1200"/></transition><transition><source ref="id184"/><target ref="id185"/><label kind="guard" x="613" y="1017">globalDoesContain == 1</label><label kind="assignment" x="613" y="1034">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = io,
globalValue = nilAnything,
lookAheadIndex = 6,
globalDoesContain = 0</label></transition><transition><source ref="id185"/><target ref="id182"/><label kind="guard" x="-112" y="1380">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1414">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = currentTime,
globalValue = nilAnything,
lookAheadIndex = 3,
globalDoesContain = 0</label><nail x="218" y="1400"/><nail x="-152" y="1400"/></transition><transition><source ref="id185"/><target ref="id186"/><label kind="guard" x="613" y="1217">globalDoesContain == 1</label><label kind="assignment" x="613" y="1234">dummy_state_io = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalValue = nilAnything,
lookAheadIndex = 7,
globalDoesContain = 0</label></transition><transition><source ref="id186"/><target ref="id185"/><label kind="guard" x="-112" y="1580">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1614">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = io,
globalValue = nilAnything,
lookAheadIndex = 6,
globalDoesContain = 0</label><nail x="218" y="1600"/><nail x="-152" y="1600"/></transition><transition><source ref="id186"/><target ref="id187"/><label kind="guard" x="613" y="1417">globalDoesContain == 1</label><label kind="assignment" x="613" y="1434">dummy_dummy_state_io_input_link = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_timer_$_t_$,
globalAttribute = done,
globalValue = EMPTY,
lookAheadIndex = 8,
globalDoesContain = 0</label></transition><transition><source ref="id187"/><target ref="id186"/><label kind="guard" x="-112" y="1780">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1814">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalValue = nilAnything,
lookAheadIndex = 7,
globalDoesContain = 0</label><nail x="218" y="1800"/><nail x="-152" y="1800"/></transition><transition><source ref="id187"/><target ref="id188"/><label kind="guard" x="613" y="1617">globalDoesContain == 1</label><label kind="assignment" x="613" y="1634">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = 0,
globalAttribute = 0,
globalValue = 0,
globalDoesContain = 0,
checkProductionsContain()</label></transition><transition><source ref="id188"/><target ref="id186"/><label kind="guard" x="-112" y="1980">globalDoesContain == -1</label><label kind="assignment" x="-112" y="2014">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalValue = nilAnything,
lookAheadIndex = 7,
globalDoesContain = 0</label><nail x="218" y="2000"/><nail x="-152" y="2000"/></transition><transition><source ref="id188"/><target ref="id189"/><label kind="guard" x="736" y="1983">globalDoesContain == 1</label><label kind="assignment" x="736" y="2000">removeStackCondition(),
addToStackAction(9),
productionFired = true,
lookAheadArray = lookAheadDefault</label><nail x="711" y="2000"/><nail x="958" y="2000"/></transition><transition><source ref="id189"/><target ref="id163"/><label kind="synchronisation" x="588" y="-127">Halt?</label><nail x="958" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id189"/><target ref="id190"/><label kind="guard" x="978" y="-34">stackConditionIndex == -1 &amp;&amp;
stackAction[stackActionIndex] == 9</label><label kind="assignment" x="978" y="8">valueFunction = remove,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = timer,
globalValue = dummy_state_timer_$_t_$,
addOperator = true</label></transition><transition><source ref="id190"/><target ref="id191"/><label kind="guard" x="1353" y="17">!addOperator</label><label kind="assignment" x="1353" y="34">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = startNewTimer,
globalValue = yes,
addOperator = true</label></transition><transition><source ref="id191"/><target ref="id163"/><label kind="guard" x="1353" y="183">!addOperator</label><label kind="assignment" x="1353" y="200">addOperator = false,
removeStackAction(),
fillNextProduction()</label><nail x="1698" y="200"/><nail x="1698" y="-110"/><nail x="-152" y="-110"/></transition></template><template><name>drone_apply_commandToStartTimer</name><declaration>int dummy_state_maxTimers_$_mT_$;
int dummy_state_currentTimers_$_cT_$;
const int NUMBER_OF_PRODUCTIONS = 1;

typedef struct {
	int savedTempAndFunction[2];
} Production;

Production productions[NUMBER_OF_PRODUCTIONS];
int productionIndex = 0;
int productionIndexTemp;


void fillNextProduction() {
	productions[productionIndex].savedTempAndFunction[0] = dummy_state_maxTimers_$_mT_$;
	productions[productionIndex].savedTempAndFunction[1] = dummy_state_currentTimers_$_cT_$;
	productionIndex++;
}

void checkProductionsContain() {
	bool containsProduction = false;
	int i;
	for (i = 0; i &lt; productionIndex; i++) {
		if (productions[i].savedTempAndFunction[0] == dummy_state_maxTimers_$_mT_$ &amp;&amp;
			productions[i].savedTempAndFunction[1] == dummy_state_currentTimers_$_cT_$) {
				containsProduction = true;
				i = NUMBER_OF_PRODUCTIONS;
		}
	}
	if (containsProduction) {
		globalDoesContain = -1;
	} else {
		globalDoesContain = 1;
	}
}

</declaration><location id="id192" x="-152" y="0"><name x="-200" y="-32">Start</name><committed/></location><location id="id193" x="-522" y="0"><name x="-702" y="-49">Retract_Conditions</name><committed/></location><location id="id194" x="-892" y="0"><committed/></location><location id="id195" x="-1262" y="0"><name x="-1452" y="-49">Retract_Assignments</name><committed/></location><location id="id196" x="-892" y="319"><committed/></location><location id="id197" x="-892" y="519"><committed/></location><location id="id198" x="-892" y="719"><committed/></location><location id="id199" x="-892" y="919"><committed/></location><location id="id200" x="-1632" y="0"><committed/></location><location id="id201" x="-1632" y="319"><committed/></location><location id="id202" x="-1632" y="519"><committed/></location><location id="id203" x="-1632" y="719"><committed/></location><location id="id204" x="-1632" y="919"><committed/></location><location id="id205" x="218" y="0"><name x="128" y="-32">Run_Guard</name><committed/></location><location id="id206" x="588" y="0"><committed/></location><location id="id207" x="588" y="200"><committed/></location><location id="id208" x="588" y="400"><committed/></location><location id="id209" x="588" y="600"><committed/></location><location id="id210" x="588" y="800"><committed/></location><location id="id211" x="588" y="1000"><committed/></location><location id="id212" x="958" y="0"><name x="818" y="-32">Run_Assignment</name><committed/></location><location id="id213" x="1328" y="0"><committed/></location><location id="id214" x="1328" y="200"><committed/></location><location id="id215" x="1328" y="400"><committed/></location><location id="id216" x="1328" y="600"><committed/></location><init ref="id192"/><transition><source ref="id192"/><target ref="id193"/><label kind="guard" x="-502" y="-17">isRetracting</label><label kind="synchronisation" x="-502" y="-34">Run_Rule?</label><label kind="assignment" x="-502" y="8">addToStackRetract(10),
productionIndexTemp = 0</label></transition><transition><source ref="id193"/><target ref="id192"/><label kind="guard" x="-714" y="-178">stackRetract[stackRetractIndex] == 10 &amp;&amp;
productionIndexTemp == productionIndex</label><label kind="assignment" x="-714" y="-144">productionIndexTemp = 0,
removeStackRetract()</label><nail x="-717" y="0"/><nail x="-717" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id193"/><target ref="id194"/><label kind="guard" x="-872" y="-34">productionIndexTemp != productionIndex &amp;&amp;
stackRetract[stackRetractIndex] == 10</label><label kind="assignment" x="-872" y="8">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[0],
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = maxTimers,
globalDoesContain = 0</label></transition><transition><source ref="id194"/><target ref="id195"/><label kind="guard" x="-1084" y="-17">globalDoesContain == -1</label></transition><transition><source ref="id194"/><target ref="id196"/><label kind="guard" x="-867" y="136">globalDoesContain == 1</label><label kind="assignment" x="-867" y="153">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[1],
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
globalDoesContain = 0</label></transition><transition><source ref="id196"/><target ref="id195"/><label kind="guard" x="-1084" y="302">globalDoesContain == -1</label><nail x="-1262" y="319"/></transition><transition><source ref="id196"/><target ref="id197"/><label kind="guard" x="-867" y="336">globalDoesContain == 1</label><label kind="assignment" x="-867" y="353">valueFunction = isLessThan,
globalValue = dummy_state_maxTimers_$_mT_$,
attributeFunction = 0,
globalIdentifier = dummy_state_currentTimers_$_cT_$,
globalAttribute = extraRestriction,
globalDoesContain = 0</label></transition><transition><source ref="id197"/><target ref="id195"/><label kind="guard" x="-1084" y="502">globalDoesContain == -1</label><nail x="-1262" y="519"/></transition><transition><source ref="id197"/><target ref="id198"/><label kind="guard" x="-867" y="536">globalDoesContain == 1</label><label kind="assignment" x="-867" y="553">valueFunction = 0,
globalValue = droneFlight,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = name,
globalDoesContain = 0</label></transition><transition><source ref="id198"/><target ref="id195"/><label kind="guard" x="-1084" y="702">globalDoesContain == -1</label><nail x="-1262" y="719"/></transition><transition><source ref="id198"/><target ref="id199"/><label kind="guard" x="-867" y="736">globalDoesContain == 1</label><label kind="assignment" x="-867" y="753">valueFunction = 0,
globalValue = yes,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = startNewTimer,
globalDoesContain = 0</label></transition><transition><source ref="id199"/><target ref="id195"/><label kind="guard" x="-1084" y="902">globalDoesContain == -1</label><nail x="-1262" y="919"/></transition><transition><source ref="id199"/><target ref="id193"/><label kind="guard" x="-1234" y="775">globalDoesContain == 1</label><label kind="assignment" x="-1234" y="792">productionIndexTemp++</label><nail x="-1237" y="919"/><nail x="-1237" y="-110"/><nail x="-522" y="-110"/></transition><transition><source ref="id195"/><target ref="id200"/><label kind="guard" x="-1612" y="-34">productionIndexTemp != productionIndex &amp;&amp;
stackRetract[stackRetractIndex] == 10</label><label kind="assignment" x="-1612" y="8">valueFunction = remove,
globalValue = dummy_state_currentTimers_$_cT_$,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
addOperator = true</label></transition><transition><source ref="id200"/><target ref="id201"/><label kind="guard" x="-1607" y="136">!addOperator</label><label kind="assignment" x="-1607" y="153">valueFunction = remove,
globalValue = yes,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = startNewTimer,
addOperator = true</label></transition><transition><source ref="id201"/><target ref="id202"/><label kind="guard" x="-1607" y="336">!addOperator</label><label kind="assignment" x="-1607" y="353">valueFunction = remove,
globalValue = queryPop,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = sentCommand,
addOperator = true</label></transition><transition><source ref="id202"/><target ref="id203"/><label kind="guard" x="-1607" y="536">!addOperator</label><label kind="assignment" x="-1607" y="553">valueFunction = remove,
globalValue = 1,
attributeFunction = dummy_state_currentTimers_$_cT_$,
globalIdentifier = _state,
globalAttribute = currentTimers,
addOperator = true</label></transition><transition><source ref="id203"/><target ref="id204"/><label kind="guard" x="-1607" y="736">!addOperator</label><label kind="assignment" x="-1607" y="753">removeOperator = true,
globalIndex = 0,
currentNumAttributes =
getNumAttributes(nestedCheckArray[0])</label></transition><transition><source ref="id204"/><target ref="id193"/><label kind="guard" x="-1824" y="758">!removeOperator &amp;&amp;
currentNumAttributes == 0</label><label kind="assignment" x="-1824" y="792">productionIndex--</label><nail x="-1827" y="919"/><nail x="-1827" y="-110"/><nail x="-522" y="-110"/></transition><transition><source ref="id192"/><target ref="id205"/><label kind="guard" x="-132" y="-34">!isRetracting &amp;&amp;
productionIndex != NUMBER_OF_PRODUCTIONS</label><label kind="synchronisation" x="-132" y="-51">Run_Rule?</label><label kind="assignment" x="-132" y="8">addToStackCondition(10)</label></transition><transition><source ref="id205"/><target ref="id192"/><label kind="synchronisation" x="-152" y="-127">Halt?</label><nail x="218" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id205"/><target ref="id206"/><label kind="guard" x="238" y="-34">stackCondition[stackConditionIndex] == 10 &amp;&amp;
!addOperator</label><label kind="assignment" x="238" y="8">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = maxTimers,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0,
globalIndex = 0</label></transition><transition><source ref="id206"/><target ref="id192"/><label kind="guard" x="-132" y="180">globalDoesContain == -1</label><label kind="assignment" x="-132" y="214">lookAheadArray = lookAheadDefault,
removeStackCondition()</label><nail x="218" y="200"/><nail x="-152" y="200"/></transition><transition><source ref="id206"/><target ref="id207"/><label kind="guard" x="613" y="17">globalDoesContain == 1</label><label kind="assignment" x="613" y="34">dummy_state_maxTimers_$_mT_$ = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label></transition><transition><source ref="id207"/><target ref="id206"/><label kind="guard" x="-112" y="380">globalDoesContain == -1</label><label kind="assignment" x="-112" y="414">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = maxTimers,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0</label><nail x="218" y="400"/><nail x="-152" y="400"/></transition><transition><source ref="id207"/><target ref="id208"/><label kind="guard" x="613" y="217">globalDoesContain == 1</label><label kind="assignment" x="613" y="234">dummy_state_currentTimers_$_cT_$ = globalValue,
valueFunction = isLessThan,
attributeFunction = 0,
globalIdentifier = dummy_state_currentTimers_$_cT_$,
globalAttribute = extraRestriction,
globalValue = dummy_state_maxTimers_$_mT_$,
lookAheadIndex = 2,
globalDoesContain = 0</label></transition><transition><source ref="id208"/><target ref="id207"/><label kind="guard" x="-112" y="580">globalDoesContain == -1</label><label kind="assignment" x="-112" y="614">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label><nail x="218" y="600"/><nail x="-152" y="600"/></transition><transition><source ref="id208"/><target ref="id209"/><label kind="guard" x="613" y="417">globalDoesContain == 1</label><label kind="assignment" x="613" y="434">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = name,
globalValue = droneFlight,
lookAheadIndex = 3,
globalDoesContain = 0</label></transition><transition><source ref="id209"/><target ref="id207"/><label kind="guard" x="-112" y="780">globalDoesContain == -1</label><label kind="assignment" x="-112" y="814">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label><nail x="218" y="800"/><nail x="-152" y="800"/></transition><transition><source ref="id209"/><target ref="id210"/><label kind="guard" x="613" y="617">globalDoesContain == 1</label><label kind="assignment" x="613" y="634">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = startNewTimer,
globalValue = yes,
lookAheadIndex = 4,
globalDoesContain = 0</label></transition><transition><source ref="id210"/><target ref="id207"/><label kind="guard" x="-112" y="980">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1014">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label><nail x="218" y="1000"/><nail x="-152" y="1000"/></transition><transition><source ref="id210"/><target ref="id211"/><label kind="guard" x="613" y="817">globalDoesContain == 1</label><label kind="assignment" x="613" y="834">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = 0,
globalAttribute = 0,
globalValue = 0,
globalDoesContain = 0,
checkProductionsContain()</label></transition><transition><source ref="id211"/><target ref="id207"/><label kind="guard" x="-112" y="1180">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1214">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
globalValue = nilAnything,
lookAheadIndex = 1,
globalDoesContain = 0</label><nail x="218" y="1200"/><nail x="-152" y="1200"/></transition><transition><source ref="id211"/><target ref="id212"/><label kind="guard" x="736" y="1183">globalDoesContain == 1</label><label kind="assignment" x="736" y="1200">removeStackCondition(),
addToStackAction(10),
productionFired = true,
lookAheadArray = lookAheadDefault</label><nail x="711" y="1200"/><nail x="958" y="1200"/></transition><transition><source ref="id212"/><target ref="id192"/><label kind="synchronisation" x="588" y="-127">Halt?</label><nail x="958" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id212"/><target ref="id213"/><label kind="guard" x="978" y="-34">stackConditionIndex == -1 &amp;&amp;
stackAction[stackActionIndex] == 10</label><label kind="assignment" x="978" y="8">valueFunction = remove,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = currentTimers,
globalValue = dummy_state_currentTimers_$_cT_$,
addOperator = true</label></transition><transition><source ref="id213"/><target ref="id214"/><label kind="guard" x="1353" y="17">!addOperator</label><label kind="assignment" x="1353" y="34">valueFunction = remove,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = startNewTimer,
globalValue = yes,
addOperator = true</label></transition><transition><source ref="id214"/><target ref="id215"/><label kind="guard" x="1353" y="217">!addOperator</label><label kind="assignment" x="1353" y="234">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = sentCommand,
globalValue = queryPop,
addOperator = true</label></transition><transition><source ref="id215"/><target ref="id216"/><label kind="guard" x="1353" y="417">!addOperator</label><label kind="assignment" x="1353" y="434">valueFunction = addFunction,
attributeFunction = dummy_state_currentTimers_$_cT_$,
globalIdentifier = _state,
globalAttribute = currentTimers,
globalValue = 1,
addOperator = true</label></transition><transition><source ref="id216"/><target ref="id192"/><label kind="guard" x="1353" y="583">!addOperator</label><label kind="assignment" x="1353" y="600">addOperator = false,
removeStackAction(),
fillNextProduction()</label><nail x="1698" y="600"/><nail x="1698" y="-110"/><nail x="-152" y="-110"/></transition></template><template><name>drone_apply_takeOver</name><declaration>int dummy_state_io_input_link_$_fd_$;
int dummy_dummy_state_io_input_link;
int dummy_state_io;
const int NUMBER_OF_PRODUCTIONS = 1;

typedef struct {
	int savedTempAndFunction[3];
} Production;

Production productions[NUMBER_OF_PRODUCTIONS];
int productionIndex = 0;
int productionIndexTemp;


void fillNextProduction() {
	productions[productionIndex].savedTempAndFunction[0] = dummy_state_io_input_link_$_fd_$;
	productions[productionIndex].savedTempAndFunction[1] = dummy_dummy_state_io_input_link;
	productions[productionIndex].savedTempAndFunction[2] = dummy_state_io;
	productionIndex++;
}

void checkProductionsContain() {
	bool containsProduction = false;
	int i;
	for (i = 0; i &lt; productionIndex; i++) {
		if (productions[i].savedTempAndFunction[0] == dummy_state_io_input_link_$_fd_$ &amp;&amp;
			productions[i].savedTempAndFunction[1] == dummy_dummy_state_io_input_link &amp;&amp;
			productions[i].savedTempAndFunction[2] == dummy_state_io) {
				containsProduction = true;
				i = NUMBER_OF_PRODUCTIONS;
		}
	}
	if (containsProduction) {
		globalDoesContain = -1;
	} else {
		globalDoesContain = 1;
	}
}

</declaration><location id="id217" x="-152" y="0"><name x="-200" y="-32">Start</name><committed/></location><location id="id218" x="-522" y="0"><name x="-702" y="-49">Retract_Conditions</name><committed/></location><location id="id219" x="-892" y="0"><committed/></location><location id="id220" x="-1262" y="0"><name x="-1452" y="-49">Retract_Assignments</name><committed/></location><location id="id221" x="-892" y="319"><committed/></location><location id="id222" x="-892" y="519"><committed/></location><location id="id223" x="-892" y="719"><committed/></location><location id="id224" x="-892" y="919"><committed/></location><location id="id225" x="-892" y="1119"><committed/></location><location id="id226" x="-1632" y="0"><committed/></location><location id="id227" x="-1632" y="319"><committed/></location><location id="id228" x="218" y="0"><name x="128" y="-32">Run_Guard</name><committed/></location><location id="id229" x="588" y="0"><committed/></location><location id="id230" x="588" y="200"><committed/></location><location id="id231" x="588" y="400"><committed/></location><location id="id232" x="588" y="600"><committed/></location><location id="id233" x="588" y="800"><committed/></location><location id="id234" x="588" y="1000"><committed/></location><location id="id235" x="588" y="1200"><committed/></location><location id="id236" x="958" y="0"><name x="818" y="-32">Run_Assignment</name><committed/></location><location id="id237" x="1328" y="0"><committed/></location><init ref="id217"/><transition><source ref="id217"/><target ref="id218"/><label kind="guard" x="-502" y="-17">isRetracting</label><label kind="synchronisation" x="-502" y="-34">Run_Rule?</label><label kind="assignment" x="-502" y="8">addToStackRetract(11),
productionIndexTemp = 0</label></transition><transition><source ref="id218"/><target ref="id217"/><label kind="guard" x="-714" y="-178">stackRetract[stackRetractIndex] == 11 &amp;&amp;
productionIndexTemp == productionIndex</label><label kind="assignment" x="-714" y="-144">productionIndexTemp = 0,
removeStackRetract()</label><nail x="-717" y="0"/><nail x="-717" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id218"/><target ref="id219"/><label kind="guard" x="-872" y="-34">productionIndexTemp != productionIndex &amp;&amp;
stackRetract[stackRetractIndex] == 11</label><label kind="assignment" x="-872" y="8">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[0],
attributeFunction = 0,
globalIdentifier = dummy_dummy_state_io_input_link,
globalAttribute = flightdata,
globalDoesContain = 0</label></transition><transition><source ref="id219"/><target ref="id220"/><label kind="guard" x="-1084" y="-17">globalDoesContain == -1</label></transition><transition><source ref="id219"/><target ref="id221"/><label kind="guard" x="-867" y="136">globalDoesContain == 1</label><label kind="assignment" x="-867" y="153">valueFunction = 0,
globalValue = droneFlight,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = name,
globalDoesContain = 0</label></transition><transition><source ref="id221"/><target ref="id220"/><label kind="guard" x="-1084" y="302">globalDoesContain == -1</label><nail x="-1262" y="319"/></transition><transition><source ref="id221"/><target ref="id222"/><label kind="guard" x="-867" y="336">globalDoesContain == 1</label><label kind="assignment" x="-867" y="353">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[2],
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = io,
globalDoesContain = 0</label></transition><transition><source ref="id222"/><target ref="id220"/><label kind="guard" x="-1084" y="502">globalDoesContain == -1</label><nail x="-1262" y="519"/></transition><transition><source ref="id222"/><target ref="id223"/><label kind="guard" x="-867" y="536">globalDoesContain == 1</label><label kind="assignment" x="-867" y="553">valueFunction = 0,
globalValue = 
productions[productionIndexTemp].savedTempAndFunction[1],
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalDoesContain = 0</label></transition><transition><source ref="id223"/><target ref="id220"/><label kind="guard" x="-1084" y="702">globalDoesContain == -1</label><nail x="-1262" y="719"/></transition><transition><source ref="id223"/><target ref="id224"/><label kind="guard" x="-867" y="736">globalDoesContain == 1</label><label kind="assignment" x="-867" y="753">valueFunction = 0,
globalValue = EMPTY,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = commands,
globalDoesContain = 0</label></transition><transition><source ref="id224"/><target ref="id220"/><label kind="guard" x="-1084" y="902">globalDoesContain == -1</label><nail x="-1262" y="919"/></transition><transition><source ref="id224"/><target ref="id225"/><label kind="guard" x="-867" y="936">globalDoesContain == 1</label><label kind="assignment" x="-867" y="953">valueFunction = 0,
globalValue = yes,
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = takeOver,
globalDoesContain = 0</label></transition><transition><source ref="id225"/><target ref="id220"/><label kind="guard" x="-1084" y="1102">globalDoesContain == -1</label><nail x="-1262" y="1119"/></transition><transition><source ref="id225"/><target ref="id218"/><label kind="guard" x="-1234" y="975">globalDoesContain == 1</label><label kind="assignment" x="-1234" y="992">productionIndexTemp++</label><nail x="-1237" y="1119"/><nail x="-1237" y="-110"/><nail x="-522" y="-110"/></transition><transition><source ref="id220"/><target ref="id226"/><label kind="guard" x="-1612" y="-34">productionIndexTemp != productionIndex &amp;&amp;
stackRetract[stackRetractIndex] == 11</label><label kind="assignment" x="-1612" y="8">valueFunction = remove,
globalValue = aiOn,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = sentCommand,
addOperator = true</label></transition><transition><source ref="id226"/><target ref="id227"/><label kind="guard" x="-1607" y="136">!addOperator</label><label kind="assignment" x="-1607" y="153">removeOperator = true,
globalIndex = 0,
currentNumAttributes =
getNumAttributes(nestedCheckArray[0])</label></transition><transition><source ref="id227"/><target ref="id218"/><label kind="guard" x="-1824" y="158">!removeOperator &amp;&amp;
currentNumAttributes == 0</label><label kind="assignment" x="-1824" y="192">productionIndex--</label><nail x="-1827" y="319"/><nail x="-1827" y="-110"/><nail x="-522" y="-110"/></transition><transition><source ref="id217"/><target ref="id228"/><label kind="guard" x="-132" y="-34">!isRetracting &amp;&amp;
productionIndex != NUMBER_OF_PRODUCTIONS</label><label kind="synchronisation" x="-132" y="-51">Run_Rule?</label><label kind="assignment" x="-132" y="8">addToStackCondition(11)</label></transition><transition><source ref="id228"/><target ref="id217"/><label kind="synchronisation" x="-152" y="-127">Halt?</label><nail x="218" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id228"/><target ref="id229"/><label kind="guard" x="238" y="-34">stackCondition[stackConditionIndex] == 11 &amp;&amp;
!addOperator</label><label kind="assignment" x="238" y="8">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_dummy_state_io_input_link,
globalAttribute = flightdata,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0,
globalIndex = 0</label></transition><transition><source ref="id229"/><target ref="id217"/><label kind="guard" x="-132" y="180">globalDoesContain == -1</label><label kind="assignment" x="-132" y="214">lookAheadArray = lookAheadDefault,
removeStackCondition()</label><nail x="218" y="200"/><nail x="-152" y="200"/></transition><transition><source ref="id229"/><target ref="id230"/><label kind="guard" x="613" y="17">globalDoesContain == 1</label><label kind="assignment" x="613" y="34">dummy_state_io_input_link_$_fd_$ = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = name,
globalValue = droneFlight,
lookAheadIndex = 1,
globalDoesContain = 0</label></transition><transition><source ref="id230"/><target ref="id229"/><label kind="guard" x="-112" y="380">globalDoesContain == -1</label><label kind="assignment" x="-112" y="414">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_dummy_state_io_input_link,
globalAttribute = flightdata,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0</label><nail x="218" y="400"/><nail x="-152" y="400"/></transition><transition><source ref="id230"/><target ref="id231"/><label kind="guard" x="613" y="217">globalDoesContain == 1</label><label kind="assignment" x="613" y="234">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = io,
globalValue = nilAnything,
lookAheadIndex = 2,
globalDoesContain = 0</label></transition><transition><source ref="id231"/><target ref="id229"/><label kind="guard" x="-112" y="580">globalDoesContain == -1</label><label kind="assignment" x="-112" y="614">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_dummy_state_io_input_link,
globalAttribute = flightdata,
globalValue = nilAnything,
lookAheadIndex = 0,
globalDoesContain = 0</label><nail x="218" y="600"/><nail x="-152" y="600"/></transition><transition><source ref="id231"/><target ref="id232"/><label kind="guard" x="613" y="417">globalDoesContain == 1</label><label kind="assignment" x="613" y="434">dummy_state_io = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalValue = nilAnything,
lookAheadIndex = 3,
globalDoesContain = 0</label></transition><transition><source ref="id232"/><target ref="id231"/><label kind="guard" x="-112" y="780">globalDoesContain == -1</label><label kind="assignment" x="-112" y="814">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = io,
globalValue = nilAnything,
lookAheadIndex = 2,
globalDoesContain = 0</label><nail x="218" y="800"/><nail x="-152" y="800"/></transition><transition><source ref="id232"/><target ref="id233"/><label kind="guard" x="613" y="617">globalDoesContain == 1</label><label kind="assignment" x="613" y="634">dummy_dummy_state_io_input_link = globalValue,
valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = commands,
globalValue = EMPTY,
lookAheadIndex = 4,
globalDoesContain = 0</label></transition><transition><source ref="id233"/><target ref="id232"/><label kind="guard" x="-112" y="980">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1014">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalValue = nilAnything,
lookAheadIndex = 3,
globalDoesContain = 0</label><nail x="218" y="1000"/><nail x="-152" y="1000"/></transition><transition><source ref="id233"/><target ref="id234"/><label kind="guard" x="613" y="817">globalDoesContain == 1</label><label kind="assignment" x="613" y="834">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io_input_link_$_fd_$,
globalAttribute = takeOver,
globalValue = yes,
lookAheadIndex = 5,
globalDoesContain = 0</label></transition><transition><source ref="id234"/><target ref="id232"/><label kind="guard" x="-112" y="1180">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1214">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalValue = nilAnything,
lookAheadIndex = 3,
globalDoesContain = 0</label><nail x="218" y="1200"/><nail x="-152" y="1200"/></transition><transition><source ref="id234"/><target ref="id235"/><label kind="guard" x="613" y="1017">globalDoesContain == 1</label><label kind="assignment" x="613" y="1034">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = 0,
globalAttribute = 0,
globalValue = 0,
globalDoesContain = 0,
checkProductionsContain()</label></transition><transition><source ref="id235"/><target ref="id232"/><label kind="guard" x="-112" y="1380">globalDoesContain == -1</label><label kind="assignment" x="-112" y="1414">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = dummy_state_io,
globalAttribute = input_link,
globalValue = nilAnything,
lookAheadIndex = 3,
globalDoesContain = 0</label><nail x="218" y="1400"/><nail x="-152" y="1400"/></transition><transition><source ref="id235"/><target ref="id236"/><label kind="guard" x="736" y="1383">globalDoesContain == 1</label><label kind="assignment" x="736" y="1400">removeStackCondition(),
addToStackAction(11),
productionFired = true,
lookAheadArray = lookAheadDefault</label><nail x="711" y="1400"/><nail x="958" y="1400"/></transition><transition><source ref="id236"/><target ref="id217"/><label kind="synchronisation" x="588" y="-127">Halt?</label><nail x="958" y="-110"/><nail x="-152" y="-110"/></transition><transition><source ref="id236"/><target ref="id237"/><label kind="guard" x="978" y="-34">stackConditionIndex == -1 &amp;&amp;
stackAction[stackActionIndex] == 11</label><label kind="assignment" x="978" y="8">valueFunction = 0,
attributeFunction = 0,
globalIdentifier = _state,
globalAttribute = sentCommand,
globalValue = aiOn,
addOperator = true</label></transition><transition><source ref="id237"/><target ref="id217"/><label kind="guard" x="1353" y="-17">!addOperator</label><label kind="assignment" x="1353" y="0">addOperator = false,
removeStackAction(),
fillNextProduction()</label><nail x="1698" y="0"/><nail x="1698" y="-110"/><nail x="-152" y="-110"/></transition></template><template><name>Scheduler</name><declaration>bool checkApplyRetract;
</declaration><location id="id238" x="-152" y="0"><name x="-200" y="-32">Start</name><committed/></location><location id="id239" x="218" y="0"><name x="38" y="-32">Set_Superstate_Nil</name><committed/></location><location id="id240" x="588" y="0"><name x="508" y="-32">Proposal</name><committed/></location><location id="id241" x="958" y="0"><name x="848" y="-32">Run_Retract</name><committed/></location><location id="id242" x="1328" y="0"><committed/></location><location id="id243" x="1698" y="0"><name x="1558" y="-32">Ready_Decision</name><committed/></location><location id="id244" x="2068" y="0"><name x="1988" y="-32">Decision</name><committed/></location><location id="id245" x="2438" y="0"><name x="2268" y="-32">Ready_Application</name><committed/></location><location id="id246" x="2808" y="0"><name x="2698" y="-32">Application</name><committed/></location><location id="id247" x="3178" y="0"><name x="3018" y="-32">Back_To_Proposal</name><committed/></location><location id="id248" x="3548" y="0"><committed/></location><location id="id249" x="3918" y="0"><name x="3748" y="-32">Run_Retract_Again</name><committed/></location><init ref="id238"/><transition><source ref="id238"/><target ref="id239"/><label kind="assignment" x="-132" y="8">addOperator = true,
valueFunction = 0,
globalIdentifier = _state,
globalAttribute = superstate,
globalValue = nil,
globalDoesContain = 1</label></transition><transition><source ref="id239"/><target ref="id240"/><label kind="guard" x="238" y="-17">!addOperator</label><label kind="assignment" x="238" y="8">initialize(operators)</label></transition><transition><source ref="id240"/><target ref="id241"/><label kind="guard" x="608" y="-17">!halt</label><label kind="synchronisation" x="608" y="-34">Run_Rule!</label><label kind="assignment" x="608" y="8">productionFired = false</label></transition><transition><source ref="id241"/><target ref="id240"/><label kind="synchronisation" x="588" y="-127">Halt?</label><nail x="958" y="-110"/><nail x="588" y="-110"/></transition><transition><source ref="id241"/><target ref="id242"/><label kind="guard" x="978" y="-51">stackConditionIndex == -1 &amp;&amp;
stackActionIndex == -1 &amp;&amp;
!addOperator</label><label kind="assignment" x="978" y="8">isRetracting = true</label></transition><transition><source ref="id242"/><target ref="id243"/><label kind="synchronisation" x="1348" y="-17">Run_Rule!</label><label kind="assignment" x="1348" y="8">checkApplyRetract = true</label></transition><transition><source ref="id243"/><target ref="id243"/><label kind="guard" x="1708" y="85">stackRetractIndex == -1 &amp;&amp;
checkApplyRetract</label><label kind="synchronisation" x="1708" y="68">Reset_Apply!</label><label kind="assignment" x="1708" y="119">checkApplyRetract = false</label><nail x="1698" y="119"/></transition><transition><source ref="id243"/><target ref="id240"/><label kind="guard" x="1328" y="-195">!checkApplyRetract &amp;&amp;
productionFired &amp;&amp;
stackRetractIndex == -1</label><label kind="assignment" x="1328" y="-144">isRetracting = false,
retractOperatorsIndex = 0</label><nail x="1698" y="-110"/><nail x="588" y="-110"/></transition><transition><source ref="id243"/><target ref="id244"/><label kind="guard" x="1718" y="-51">!checkApplyRetract &amp;&amp;
!productionFired &amp;&amp;
stackRetractIndex == -1</label><label kind="assignment" x="1718" y="8">isRetracting = false,
fillOthers(),
retractOperatorsIndex = 0</label></transition><transition><source ref="id244"/><target ref="id245"/><label kind="synchronisation" x="2088" y="-17">Require_Test!</label></transition><transition><source ref="id245"/><target ref="id246"/><label kind="synchronisation" x="2458" y="-17">Continue_Run?</label></transition><transition><source ref="id246"/><target ref="id247"/><label kind="synchronisation" x="2828" y="-17">Run_Rule!</label><label kind="assignment" x="2828" y="8">productionFired = false</label></transition><transition><source ref="id247"/><target ref="id240"/><label kind="synchronisation" x="2808" y="-127">Halt?</label><nail x="3178" y="-110"/><nail x="588" y="-110"/></transition><transition><source ref="id247"/><target ref="id248"/><label kind="guard" x="3198" y="-51">stackConditionIndex == -1 &amp;&amp;
stackActionIndex == -1 &amp;&amp;
!addOperator</label><label kind="assignment" x="3198" y="8">isRetracting = true,
retractOperatorsIndex = 0</label></transition><transition><source ref="id248"/><target ref="id249"/><label kind="synchronisation" x="3568" y="-17">Run_Rule!</label><label kind="assignment" x="3568" y="8">checkApplyRetract = true</label></transition><transition><source ref="id249"/><target ref="id246"/><label kind="guard" x="3726" y="-195">!checkApplyRetract &amp;&amp;
productionFired &amp;&amp;
stackRetractIndex == -1</label><label kind="assignment" x="3726" y="-144">isRetracting = false,
retractOperatorsIndex = 0</label><nail x="3723" y="0"/><nail x="3723" y="-110"/><nail x="2808" y="-110"/></transition><transition><source ref="id249"/><target ref="id240"/><label kind="guard" x="3548" y="-297">!checkApplyRetract &amp;&amp;
!productionFired &amp;&amp;
stackRetractIndex == -1</label><label kind="assignment" x="3548" y="-246">clearFill(required),
clearFill(acceptable),
clearFill(best),
isRetracting = false,
removeOperator = true,
globalIdentifier = finalOp,
globalAttribute = operator,
retractOperatorsIndex = 0</label><nail x="3918" y="-110"/><nail x="588" y="-110"/></transition><transition><source ref="id249"/><target ref="id249"/><label kind="guard" x="3928" y="85">stackRetractIndex == -1 &amp;&amp;
checkApplyRetract</label><label kind="synchronisation" x="3928" y="68">Reset_Apply!</label><label kind="assignment" x="3928" y="119">checkApplyRetract = false</label><nail x="3918" y="119"/></transition></template><template><name>Attribute_Value_Utility</name><declaration>void checkCondition() {
	bool conditionSatisfied = false;
	if (valueFunction == isNotEqualTo &amp;&amp; globalIdentifier != globalValue) {
		conditionSatisfied = true;
	} else if (valueFunction == isGreaterThan &amp;&amp; globalIdentifier &gt; globalValue) {
		conditionSatisfied = true;
	} else if (valueFunction == isLessThan &amp;&amp; globalIdentifier &lt; globalValue) {
		conditionSatisfied = true;
	} else if (valueFunction == isGreaterThanOrEqualTo &amp;&amp; globalIdentifier &gt;= globalValue) {
		conditionSatisfied = true;
	}
	if (conditionSatisfied) {
		globalDoesContain = 1;
	} else {
		globalDoesContain = -1;
	}
}

void nextNumBut() {
	int nextIndex = lookAheadArray[lookAheadIndex];
	int nextElement = getNumButNextElement(globalAttribute, nextIndex);
	int i;
	if (nextElement == -1) {
		lookAheadArray[lookAheadIndex] = 0;
		globalDoesContain = -1;
	} else {
		attributeFunction = nextElement;
		lookAheadArray[lookAheadIndex] = nextIndex + 1;
		globalDoesContain = 1;
	}
}

void catchAll() {
	globalDoesContain = -1;
}

</declaration><location id="id250" x="-739" y="-195"><name x="-780" y="-229">Start</name><committed/></location><init ref="id250"/><transition><source ref="id250"/><target ref="id250"/><label kind="guard" x="-1156" y="-205">globalDoesContain == 0 &amp;&amp;
globalAttribute == extraRestriction</label><label kind="assignment" x="-1156" y="-171">checkCondition()</label><nail x="-739" y="-144"/><nail x="-807" y="-144"/><nail x="-807" y="-195"/></transition><transition><source ref="id250"/><target ref="id250"/><label kind="guard" x="-790" y="-85">globalDoesContain == 0 &amp;&amp;
((globalIdentifier == _state &amp;&amp;
globalAttribute != superstate &amp;&amp;
globalIdentifier == _state &amp;&amp;
globalAttribute != maxTimers &amp;&amp;
globalIdentifier == _state &amp;&amp;
globalAttribute != timer &amp;&amp;
globalIdentifier == _state &amp;&amp;
globalAttribute != sentCommand &amp;&amp;
globalIdentifier == _state &amp;&amp;
globalAttribute != name &amp;&amp;
globalIdentifier == _state &amp;&amp;
globalAttribute != currentTimers &amp;&amp;
globalIdentifier == _state &amp;&amp;
globalAttribute != wait_flag &amp;&amp;
globalIdentifier == _state &amp;&amp;
globalAttribute != startNewTimer &amp;&amp;
globalIdentifier == _state &amp;&amp;
globalAttribute != addressedProblem &amp;&amp;
globalIdentifier == _state &amp;&amp;
globalAttribute != operator &amp;&amp;
globalIdentifier == _state &amp;&amp;
globalAttribute != willBeInPopulatedArea) ||
(globalIdentifier == state_timer_1 &amp;&amp;
globalAttribute != targetTime) ||
(globalIdentifier == state_operator_1 &amp;&amp;
globalAttribute != name) ||
(globalIdentifier == state_operator_2 &amp;&amp;
globalAttribute != name) &amp;&amp;
globalAttribute != extraRestriction)</label><label kind="assignment" x="-790" y="442">catchAll()</label><nail x="-739" y="-144"/><nail x="-688" y="-93"/><nail x="-790" y="-93"/><nail x="-739" y="-144"/></transition></template><template><name>Attribute_Value</name><parameter>const int NUM_VALUES, const int OPERATOR_ID, const int ATTRIBUTE_INDEX</parameter><declaration>int values[NUM_VALUES];
int valuesIndex = 0;
int containsIndex = -1;

void doValuesContain() {
	if (globalValue == nilAnything) {
		if (lookAheadArray[lookAheadIndex] &lt; valuesIndex) {
			globalValue = values[lookAheadArray[lookAheadIndex]];
			lookAheadArray[lookAheadIndex]++;
		} else {
			globalDoesContain = -1;
			lookAheadArray[lookAheadIndex] = 0;
		}
	} else {
		int contains = -1;
		if (globalValue == EMPTY &amp;&amp; valuesIndex == 0) {
			contains = 1;
		} else {
			int i;
			for (i = 0; i &lt; valuesIndex; i++) {
				if (values[i] == globalValue) {
					contains = 1;
					i = valuesIndex;
				}
			}
		}
		if (contains == 1) {
			globalDoesContain = 1;
		} else {
			globalDoesContain = -1;
		}
	}
}

void addValue() {
	if (containsIndex == -1) {
		values[valuesIndex] = globalValue;
		if (valueFunction == addFunction) {
			values[valuesIndex] += attributeFunction;
		} else if (valueFunction == subtractFunction) {
			values[valuesIndex] -= attributeFunction;
		}
		valuesIndex++;
	}
	addOperator = false;
}

int getIndexOfValue() {
	int i = 0;
	for (i = 0; i &lt; valuesIndex; i++) {
		if (values[i] == globalValue) {
			return i;
		}
	}
	return -1;
}

void removeValue() {
	while (valuesIndex &gt; 0) {
		valuesIndex--;
		values[valuesIndex] = 0;
	}
	currentNumAttributes--;
	if (currentNumAttributes == 0) {
		removeNestedCheckArray();
		globalIndex++;
		if (globalIndex == nestedCheckIndex) {
			removeOperator = false;
			nestedCheckIndex = 0;
		} else {
			currentNumAttributes = getNumAttributes(nestedCheckArray[globalIndex]);
		}
	}
}

void removeSpecificValue() {
	int i = containsIndex;
	if (i != -1) {
		for (i = containsIndex; i &lt; valuesIndex - 1; i++) {
			values[i] = values[i + 1];
		}
		valuesIndex--;
		values[valuesIndex] = 0;
	}
	 if(isRetracting) {
		int numAttributes = getNumAttributes(globalValue);
		if (numAttributes &gt; 0) {
			addToNestedCheckArray(globalValue);
		}
	}
	addOperator = false;
}</declaration><location id="id251" x="-739" y="-195"><name x="-780" y="-229">Start</name><committed/></location><location id="id252" x="-229" y="-195"><committed/></location><init ref="id251"/><transition><source ref="id252"/><target ref="id251"/><label kind="guard" x="-425" y="-331">valueFunction == remove</label><label kind="assignment" x="-425" y="-314">removeSpecificValue()</label><nail x="-535" y="-340"/></transition><transition><source ref="id252"/><target ref="id251"/><label kind="guard" x="-382" y="-127">valueFunction != remove</label><label kind="assignment" x="-382" y="-110">addValue()</label><nail x="-535" y="-68"/></transition><transition><source ref="id251"/><target ref="id251"/><label kind="guard" x="-790" y="-85">removeOperator &amp;&amp;
currentNumAttributes &gt; 0 &amp;&amp;
nestedCheckArray[globalIndex] == OPERATOR_ID</label><label kind="assignment" x="-790" y="-34">removeValue()</label><nail x="-739" y="-144"/><nail x="-688" y="-93"/><nail x="-790" y="-93"/><nail x="-739" y="-144"/></transition><transition><source ref="id251"/><target ref="id251"/><label kind="guard" x="-1156" y="-204">globalDoesContain == 0 &amp;&amp;
globalIdentifier == OPERATOR_ID &amp;&amp;
globalAttribute == ATTRIBUTE_INDEX</label><label kind="assignment" x="-1156" y="-153">doValuesContain()</label><nail x="-739" y="-144"/><nail x="-807" y="-144"/><nail x="-807" y="-195"/></transition><transition><source ref="id251"/><target ref="id252"/><label kind="guard" x="-654" y="-255">addOperator &amp;&amp;
globalIdentifier == OPERATOR_ID &amp;&amp;
globalAttribute == ATTRIBUTE_INDEX</label><label kind="assignment" x="-654" y="-187">containsIndex =getIndexOfValue()</label></transition></template><template><name>preferenceResolutionTemplate</name><declaration>bool requiredAndProhibited;
int currentOp;
int finalOperatorIndex;
bool isRequiredAndProhibited() {
	int i = 0;
	while (i &lt; N &amp;&amp; required[i] != 0) {
		if (operators[required[i]-1].operator.isProhibited) {
			return true;
		}
		i++;
	}
	return false;
}

void remove(int index, int &amp;ref[N]) {
	int i = index;
	while (i &lt; N-1 &amp;&amp; ref[i] != 0) {
		ref[i] = ref[i+1];
		i++;
	}
	ref[i] = 0;
} 

void removeProhibitedFromAcceptable() {
	int i = 0;
	while (i &lt; N &amp;&amp; acceptable[i] != 0) {
		if (operators[acceptable[i]-1].operator.isProhibited) {
			remove(i, acceptable);
		} else {
			i++;
		}
	}
}

int variablesContains(int testId) {
	int i = 0;
	while (i &lt; N &amp;&amp; acceptable[i] != 0) {
		if (acceptable[i] == testId) {
			return i;
		}
		i++;
	}
	return -1;
}

void removeWorseAndRejectedFromAcceptable() {
	int i = 0;
	int j = 0;
	int k = 0;
	bool temp[N];
	int containID = -1;
	for (k = 0; k &lt; N; k++) {
		temp[k] = false;
	}
	i = 0;
	while (i &lt; N &amp;&amp; acceptable[i] != 0) {
		j = 0;
		while (j &lt; N &amp;&amp; operators[acceptable[i]-1].better[j] != 0) {
			containID = variablesContains(operators[acceptable[i]-1].better[j]);
			if (!temp[operators[acceptable[i]-1].better[j] - 1] &amp;&amp; containID != -1) {
				temp[operators[acceptable[i]-1].better[j] - 1] = true;
			}
			j++;
		}
		if (operators[acceptable[i]-1].operator.isRejected) {
			temp[acceptable[i] - 1] = true;
		}
		i++;
	}
	i = 0;
	while (i &lt; N) {
		if (temp[i]) {
			containID = variablesContains(i+1);
			if (containID != -1) {
				remove(containID, acceptable);
			}
		}
		i++;	
	}}

void removeBest() {
	int i = 0;
	while (i &lt; N &amp;&amp; acceptable[i] != 0) {
		if (!operators[acceptable[i]-1].operator.isBest) {
			remove(i, acceptable);
		} else {
			i++;
		}
	}
}

void removeWorst() {
	int i = 0;
	while (i &lt; N &amp;&amp; acceptable[i] != 0) {
		if (operators[acceptable[i]-1].operator.isWorst) {
			remove(i, acceptable);
		} else {
			i++;
		}
	}
}

bool areAllIndifferent() {
	int i = 0;
	int j = 0;
	bool temp[N];
	for(i = 0; i &lt; N; i++) {
		temp[i] = false;
	}
	i = 0;
	while (i &lt; N &amp;&amp; acceptable[i] != 0) {
		if (operators[acceptable[i]-1].operator.isUnaryIndifferent == 0 &amp;&amp; !operators[acceptable[i]-1].operator.hasNumericIndifferent) {
			temp[acceptable[i]-1] = true;
		}
		i++;
	}
	i = 0;
	while (i &lt; N) {
		if (temp[i]) {
			j = 0;
			if (operators[i].binaryIndifferent[0] == 0) {
				return false;
			}
			while(j &lt; N &amp;&amp; operators[i].binaryIndifferent[j] != 0) {
				if(variablesContains(operators[i].binaryIndifferent[j]) == -1) {
					return false;
				}
				j++;
			}
		}
		i++;
	}
	return true;
}

int modulus(int num) {
	if (num == 0) {
		return 0;
	} else {
		int d = num / numLeft;
		int m = numLeft*d;
		int r = num-m;
		return r;
	}
}</declaration><location id="id253" x="-3488" y="-864"><committed/></location><location id="id254" x="-3488" y="-920"><committed/></location><location id="id255" x="-3488" y="-1120"><committed/></location><location id="id256" x="-3808" y="-518"><committed/></location><location id="id257" x="-2966" y="-706"><name x="-2976" y="-736">Tie</name><committed/></location><location id="id258" x="-3488" y="-624"><name x="-3616" y="-632">IndifferentTest</name><committed/></location><location id="id259" x="-3488" y="-816"><name x="-3592" y="-824">WorstFilter</name><committed/></location><location id="id260" x="-2976" y="-1064"><name x="-2986" y="-1094">Conflict</name><committed/></location><location id="id261" x="-3488" y="-992"><name x="-3576" y="-1000">BestFilter</name><committed/></location><location id="id262" x="-3488" y="-1064"><name x="-3632" y="-1072">BetterWorseFilter</name><committed/></location><location id="id263" x="-2872" y="-1096"><name x="-2864" y="-1120">NoChange</name><committed/></location><location id="id264" x="-3488" y="-1192"><name x="-3592" y="-1200">RejectFilter</name><committed/></location><location id="id265" x="-3488" y="-1264"><name x="-3600" y="-1272">ProhibitFilter</name><committed/></location><location id="id266" x="-3488" y="-1336"><name x="-3640" y="-1344">AcceptableCollect</name><committed/></location><location id="id267" x="-2616" y="-520"><name x="-2598" y="-594">done</name><committed/></location><location id="id268" x="-2976" y="-1424"><committed/></location><location id="id269" x="-2976" y="-1520"><name x="-2986" y="-1550">ConstraintFailure</name><committed/></location><location id="id270" x="-3488" y="-1424"><name x="-3592" y="-1432">RequireTest</name><committed/></location><location id="id271" x="-3488" y="-1536"><name x="-3498" y="-1566">Start</name><committed/></location><init ref="id271"/><transition><source ref="id258"/><target ref="id267"/><label kind="select" x="-3208" y="-648">x : int[0, N-1]</label><label kind="guard" x="-3224" y="-616">areAllIndifferent()</label><label kind="assignment" x="-3280" y="-600">finalOperatorIndex = acceptable[modulus(x)]</label><nail x="-2616" y="-624"/></transition><transition><source ref="id253"/><target ref="id259"/><label kind="assignment" x="-3760" y="-848">numLeft = getNumLeft(acceptable)</label></transition><transition><source ref="id261"/><target ref="id254"/><label kind="assignment" x="-3480" y="-960">numLeft = getNumLeft(best)</label></transition><transition><source ref="id255"/><target ref="id262"/><label kind="assignment" x="-3480" y="-1104">numLeft = getNumLeft(acceptable)</label></transition><transition><source ref="id264"/><target ref="id255"/><label kind="guard" x="-3480" y="-1176">numLeft &gt; 1</label><label kind="assignment" x="-3480" y="-1160">removeWorseAndRejectedFromAcceptable()</label></transition><transition><source ref="id262"/><target ref="id260"/><label kind="guard" x="-3296" y="-1056">numLeft == 0</label></transition><transition><source ref="id258"/><target ref="id257"/><label kind="guard" x="-3174" y="-730">!areAllIndifferent()</label><nail x="-3296" y="-624"/><nail x="-3254" y="-706"/></transition><transition><source ref="id259"/><target ref="id258"/><label kind="guard" x="-3480" y="-776">numLeft &gt; 1</label><label kind="assignment" x="-3480" y="-760">removeWorst()</label></transition><transition><source ref="id254"/><target ref="id253"/><label kind="guard" x="-3456" y="-920">numLeft &gt; 0</label><label kind="assignment" x="-3456" y="-880">removeBest()</label><nail x="-3456" y="-888"/></transition><transition><source ref="id254"/><target ref="id253"/><label kind="guard" x="-3624" y="-896">numLeft == 0</label><nail x="-3520" y="-888"/></transition><transition><source ref="id259"/><target ref="id267"/><label kind="guard" x="-3112" y="-840">numLeft == 1</label><label kind="assignment" x="-3112" y="-808">finalOperatorIndex = acceptable[0]</label><nail x="-2616" y="-816"/></transition><transition><source ref="id259"/><target ref="id263"/><label kind="guard" x="-3224" y="-936">numLeft == 0</label><nail x="-3312" y="-816"/><nail x="-3264" y="-912"/><nail x="-2976" y="-912"/><nail x="-2872" y="-912"/></transition><transition><source ref="id262"/><target ref="id261"/><label kind="guard" x="-3480" y="-1040">numLeft &gt; 0</label></transition><transition><source ref="id264"/><target ref="id263"/><label kind="guard" x="-3080" y="-1216">numLeft == 0</label><nail x="-3304" y="-1192"/><nail x="-2872" y="-1192"/></transition><transition><source ref="id264"/><target ref="id267"/><label kind="guard" x="-2856" y="-1296">numLeft == 1</label><label kind="assignment" x="-2880" y="-1264">finalOperatorIndex = acceptable[0]</label><nail x="-3328" y="-1192"/><nail x="-3264" y="-1272"/><nail x="-2616" y="-1272"/></transition><transition><source ref="id265"/><target ref="id264"/><label kind="assignment" x="-3744" y="-1240">numLeft = getNumLeft(acceptable)</label></transition><transition><source ref="id266"/><target ref="id265"/><label kind="assignment" x="-3472" y="-1312">removeProhibitedFromAcceptable()</label></transition><transition><source ref="id270"/><target ref="id266"/><label kind="guard" x="-3480" y="-1384">numLeft == 0</label><nail x="-3488" y="-1352"/></transition><transition><source ref="id268"/><target ref="id269"/><label kind="guard" x="-2968" y="-1488">operators[currentOp-1].operator.isProhibited</label></transition><transition><source ref="id268"/><target ref="id267"/><label kind="guard" x="-2808" y="-1456">!operators[currentOp-1].operator.isProhibited</label><label kind="assignment" x="-2850" y="-1416">finalOperatorIndex = currentOp</label><nail x="-2616" y="-1424"/></transition><transition><source ref="id270"/><target ref="id268"/><label kind="guard" x="-3256" y="-1448">numLeft == 1</label><label kind="assignment" x="-3272" y="-1416">currentOp = required[0]</label></transition><transition><source ref="id270"/><target ref="id269"/><label kind="guard" x="-3144" y="-1552">numLeft &gt; 1</label><nail x="-3320" y="-1424"/><nail x="-3264" y="-1520"/></transition><transition><source ref="id271"/><target ref="id270"/><label kind="synchronisation" x="-3624" y="-1520">Require_Test?</label><label kind="assignment" x="-3728" y="-1496">numLeft = getNumLeft(required)</label></transition><transition><source ref="id267"/><target ref="id256"/><label kind="assignment" x="-3280" y="-504">addOperator = true,
valueFunction = 0,
globalIdentifier = finalOp,
globalAttribute = operator,
globalValue = finalOperatorIndex,
selectedFinalOperatorIndex = finalOperatorIndex</label></transition><transition><source ref="id256"/><target ref="id271"/><label kind="guard" x="-3918" y="-1097">!addOperator</label><label kind="synchronisation" x="-3918" y="-1113">Continue_Run!</label><nail x="-3808" y="-1536"/></transition></template><system>drone_apply_commandToStartTimer_0 = drone_apply_commandToStartTimer(); 
drone_apply_timer_done_execute_0 = drone_apply_timer_done_execute(); 
proposeWait_0 = proposeWait(); 
drone_apply_takeOver_0 = drone_apply_takeOver(); 
applyWait_0 = applyWait(); 
drone_apply_returnToBase_outOfTime_0 = drone_apply_returnToBase_outOfTime(); 
drone_apply_returnToBase_populated_0 = drone_apply_returnToBase_populated(); 
drone_apply_startTimer_0 = drone_apply_startTimer(); 
drone_propose_initialize_0 = drone_propose_initialize(); 
drone_apply_initialize_0 = drone_apply_initialize(); 
drone_apply_operator_C2_Lost_Link_0 = drone_apply_operator_C2_Lost_Link(); 
AV_state_1_maxTimers = Attribute_Value(2, _state, maxTimers);
AV_state_1_timer = Attribute_Value(2, _state, timer);
AV_state_1_sentCommand = Attribute_Value(3, _state, sentCommand);
AV_state_1_name = Attribute_Value(1, _state, name);
AV_state_1_currentTimers = Attribute_Value(3, _state, currentTimers);
AV_state_1_wait_flag = Attribute_Value(3, _state, wait_flag);
AV_state_1_startNewTimer = Attribute_Value(2, _state, startNewTimer);
AV_state_1_addressedProblem = Attribute_Value(1, _state, addressedProblem);
AV_state_1_operator = Attribute_Value(2, _state, operator);
AV_state_1_willBeInPopulatedArea = Attribute_Value(2, _state, willBeInPopulatedArea);
AV_state_timer_1_targetTime = Attribute_Value(1, state_timer_1, targetTime);
AV_state_operator_1_name = Attribute_Value(1, state_operator_1, name);
AV_state_operator_2_name = Attribute_Value(1, state_operator_2, name);
AV_final_operator = Attribute_Value(1, finalOp, operator);
AV_state_superstate = Attribute_Value(1, _state, superstate);
AVUtility = Attribute_Value_Utility();
preferenceResolution = preferenceResolutionTemplate(); 
scheduler = Scheduler(); 
system drone_apply_commandToStartTimer_0, drone_apply_timer_done_execute_0, proposeWait_0, drone_apply_takeOver_0, applyWait_0, drone_apply_returnToBase_outOfTime_0, drone_apply_returnToBase_populated_0, drone_apply_startTimer_0, drone_propose_initialize_0, drone_apply_initialize_0, drone_apply_operator_C2_Lost_Link_0, AVUtility, preferenceResolution, scheduler, AV_state_1_maxTimers, AV_state_1_timer, AV_state_1_sentCommand, AV_state_1_name, AV_state_1_currentTimers, AV_state_1_wait_flag, AV_state_1_startNewTimer, AV_state_1_addressedProblem, AV_state_1_operator, AV_state_1_willBeInPopulatedArea, AV_state_timer_1_targetTime, AV_state_operator_1_name, AV_state_operator_2_name, AV_final_operator, AV_state_superstate;</system></nta>